var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{a4 as n,af as i,k as u,Q as c,ao as v,bO as m,u as f,ay as p,U as d,b1 as y,b3 as b,bn as h,X as g,A as w,x as S,C as z,b6 as x,bN as _,W as E,a2 as k,I as j,bP as L,aY as O,bM as T,al as H,aA as B,r as C,as as $,ax as N,aF as P,aI as A,V as M}from"./todo.9d8ad3e1.js";import{b as W,_ as X,d as Y,w as R}from"./index.88f3c51b.js";import{u as I}from"./index.6fb72867.js";import{t as K}from"./scroll.d4cf4dfc.js";import{a as q,i as D}from"./style.83568f4e.js";const F=Symbol("scrollbarContextKey"),Q={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};var U=X(n({__name:"thumb",props:W({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),setup(e){const a=e,l=i(F),t=I("scrollbar");l||K("Thumb","can not inject scrollbar context");const r=u(),s=u(),o=u({}),n=u(!1);let E=!1,k=!1,j=_?document.onselectstart:null;const L=c((()=>Q[a.vertical?"vertical":"horizontal"])),O=c((()=>(({move:e,size:a,bar:l})=>({[l.size]:a,transform:`translate${l.axis}(${e}%)`}))({size:a.size,move:a.move,bar:L.value}))),T=c((()=>r.value[L.value.offset]**2/l.wrapElement[L.value.scrollSize]/a.ratio/s.value[L.value.offset])),H=e=>{var a;if(e.stopPropagation(),e.ctrlKey||[1,2].includes(e.button))return;null==(a=window.getSelection())||a.removeAllRanges(),C(e);const l=e.currentTarget;l&&(o.value[L.value.axis]=l[L.value.offset]-(e[L.value.client]-l.getBoundingClientRect()[L.value.direction]))},B=e=>{if(!s.value||!r.value||!l.wrapElement)return;const a=100*(Math.abs(e.target.getBoundingClientRect()[L.value.direction]-e[L.value.client])-s.value[L.value.offset]/2)*T.value/r.value[L.value.offset];l.wrapElement[L.value.scroll]=a*l.wrapElement[L.value.scrollSize]/100},C=e=>{e.stopImmediatePropagation(),E=!0,document.addEventListener("mousemove",$),document.addEventListener("mouseup",N),j=document.onselectstart,document.onselectstart=()=>!1},$=e=>{if(!r.value||!s.value)return;if(!1===E)return;const a=o.value[L.value.axis];if(!a)return;const t=100*(-1*(r.value.getBoundingClientRect()[L.value.direction]-e[L.value.client])-(s.value[L.value.offset]-a))*T.value/r.value[L.value.offset];l.wrapElement[L.value.scroll]=t*l.wrapElement[L.value.scrollSize]/100},N=()=>{E=!1,o.value[L.value.axis]=0,document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",N),P(),k&&(n.value=!1)};v((()=>{P(),document.removeEventListener("mouseup",N)}));const P=()=>{document.onselectstart!==j&&(document.onselectstart=j)};return m(f(l,"scrollbarElement"),"mousemove",(()=>{k=!1,n.value=!!a.size})),m(f(l,"scrollbarElement"),"mouseleave",(()=>{k=!0,n.value=E})),(e,a)=>(p(),d(x,{name:S(t).b("fade"),persisted:""},{default:y((()=>[b(g("div",{ref_key:"instance",ref:r,class:w([S(t).e("bar"),S(t).is(S(L).key)]),onMousedown:B},[g("div",{ref_key:"thumb",ref:s,class:w(S(t).e("thumb")),style:z(S(O)),onMousedown:H},null,38)],34),[[h,e.always||n.value]])])),_:1},8,["name"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);var V=X(n({__name:"bar",props:W({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),setup(e,{expose:a}){const l=e,t=u(0),r=u(0);return a({handleScroll:e=>{if(e){const a=e.offsetHeight-4,s=e.offsetWidth-4;r.value=100*e.scrollTop/a*l.ratioY,t.value=100*e.scrollLeft/s*l.ratioX}}}),(e,a)=>(p(),E(j,null,[k(U,{move:t.value,ratio:e.ratioX,size:e.width,always:e.always},null,8,["move","ratio","size","always"]),k(U,{move:r.value,ratio:e.ratioY,size:e.height,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const G=W({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:Y([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),J={scroll:({scrollTop:e,scrollLeft:a})=>[e,a].every(L)},Z=n((ee=((e,a)=>{for(var l in a||(a={}))r.call(a,l)&&o(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&o(e,l,a[l]);return e})({},{name:"ElScrollbar"}),a(ee,l({props:G,emits:J,setup(e,{expose:a,emit:l}){const t=e,r=I("scrollbar");let s,o;const n=u(),i=u(),v=u(),f=u("0"),b=u("0"),h=u(),x=u(1),_=u(1),k=c((()=>{const e={};return t.height&&(e.height=q(t.height)),t.maxHeight&&(e.maxHeight=q(t.maxHeight)),[t.wrapStyle,e]})),j=()=>{var e;i.value&&(null==(e=h.value)||e.handleScroll(i.value),l("scroll",{scrollTop:i.value.scrollTop,scrollLeft:i.value.scrollLeft}))},W=()=>{if(!i.value)return;const e=i.value.offsetHeight-4,a=i.value.offsetWidth-4,l=e**2/i.value.scrollHeight,r=a**2/i.value.scrollWidth,s=Math.max(l,t.minSize),o=Math.max(r,t.minSize);x.value=l/(e-l)/(s/(e-s)),_.value=r/(a-r)/(o/(a-o)),b.value=s+4<e?`${s}px`:"",f.value=o+4<a?`${o}px`:""};return O((()=>t.noresize),(e=>{e?(null==s||s(),null==o||o()):(({stop:s}=T(v,W)),o=m("resize",W))}),{immediate:!0}),O((()=>[t.maxHeight,t.height]),(()=>{t.native||H((()=>{var e;W(),i.value&&(null==(e=h.value)||e.handleScroll(i.value))}))})),B(F,C({scrollbarElement:n,wrapElement:i})),$((()=>{t.native||H((()=>W()))})),N((()=>W())),a({wrap$:i,update:W,scrollTo:function(e,a){D(e)?i.value.scrollTo(e):L(e)&&L(a)&&i.value.scrollTo(e,a)},setScrollTop:e=>{L(e)&&(i.value.scrollTop=e)},setScrollLeft:e=>{L(e)&&(i.value.scrollLeft=e)},handleScroll:j}),(e,a)=>(p(),E("div",{ref_key:"scrollbar$",ref:n,class:w(S(r).b())},[g("div",{ref_key:"wrap$",ref:i,class:w([e.wrapClass,S(r).e("wrap"),{[S(r).em("wrap","hidden-default")]:!e.native}]),style:z(S(k)),onScroll:j},[(p(),d(A(e.tag),{ref_key:"resize$",ref:v,class:w([S(r).e("view"),e.viewClass]),style:z(e.viewStyle)},{default:y((()=>[P(e.$slots,"default")])),_:3},8,["class","style"]))],38),e.native?M("v-if",!0):(p(),d(V,{key:0,ref_key:"barRef",ref:h,height:b.value,width:f.value,always:e.always,"ratio-x":_.value,"ratio-y":x.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}}))));var ee;const ae=R(X(Z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]));export{ae as E};
