import{h as a,a6 as s,ad as e}from"./main.5f87c81f.js";import{a as t}from"./timeFormat.59b65a7c.js";import{a4 as n,ay as l,U as i,a2 as o,k as c,aG as r,b1 as d,X as m,D as p,x as u,W as f,aE as b,I as v,V as g,ak as h,a1 as x,cq as w,d_ as y,cb as k}from"./save_config.7e387697.js";import"./el-input.07836306.js";import{E as j}from"./el-overlay.e22515de.js";import{E as _}from"./index2.948aebda.js";import"./index2.ebb82d9e.js";import"./event2.b0442ad9.js";import"./validator2.fec6f1ba.js";var H=n({name:"UploadFilled"});const Y={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},C=o("path",{fill:"currentColor",d:"M544 864V672h128L512 480 352 672h128v192H320v-1.6c-5.376.32-10.496 1.6-16 1.6A240 240 0 0 1 64 624c0-123.136 93.12-223.488 212.608-237.248A239.808 239.808 0 0 1 512 192a239.872 239.872 0 0 1 235.456 194.752c119.488 13.76 212.48 114.112 212.48 237.248a240 240 0 0 1-240 240c-5.376 0-10.56-1.28-16-1.6v1.6H544z"},null,-1);H.render=function(a,s,e,t,n,o){return l(),i("svg",Y,[C])},H.__file="packages/components/UploadFilled.vue";var D=H;const M=m("div",{class:"ac f18 b mb10"},"历史备份节点列表",-1),z=m("p",{class:"f12 d-sub ac mb20"},"我们为您保留最多5个备份节点，只有手动备份才会保留历史节点，数据修复请联系开发者微信：xdlumia",-1),T={class:"p50 al f12",style:{"padding-top":"10px"}},E={class:"d-flex-between mt15"},F={class:"d-sub"},U=x("立即备份 "),A=m("div",{class:"d-flex-between mt20 mb10"},[m("h2",{class:"d-main f16 b"},"历史备份节点")],-1),V={class:"d-sub"},q=["onClick"],B=x("从此节点恢复 "),G={key:0,class:"ac d-sub"},I={setup(n){const x=c([]),H=c(null);function Y(){((s={})=>a.get("/itab/userConfigHistory/list",{params:s}))({size:5}).then((a=>{x.value=a.data||[]})),((s={})=>a.get("/itab/config",{params:s}))({updateTime:1}).then((a=>{H.value=a.data.updateTime}))}function C(s){_.confirm("此操作将会覆盖本地数据, 是否继续?","恢复数据",{center:!0,type:"warning"}).then((()=>{const t=e.service({lock:!0,text:"恢复备份节点",background:"rgba(0, 0, 0, 0.7)"});((s={})=>a.get("/itab/userConfigHistory/info",{params:s}))({_id:s}).then((a=>{let s=a.data;y(s),t.close(),k({showClose:!0,message:"恢复成功",type:"success"})}))}))}return Y(),(a,e)=>{const n=r("el-icon");return l(),i(u(j),h({"custom-class":"notion-dialog","close-on-press-escape":!1,width:"640px","append-to-body":""},a.$attrs),{default:d((()=>[M,z,m("div",T,[m("li",E,[m("span",F,"上次备份时间："+p(u(t)(H.value,"YYYY年MM月DD日 HH:mm:ss")),1),m("span",{onClick:e[0]||(e[0]=a=>{_.confirm("将本地数据备份到云端?","备份数据",{center:!0,type:"warning"}).then((()=>{w(null,100,"manua"),setTimeout((()=>{Y()}),200)}))}),class:"d-pointer d-main"},[o(n,{size:14,style:{"vertical-align":"-3px","margin-right":"4px"}},{default:d((()=>[o(u(D))])),_:1}),U])]),A,m("ul",null,[(l(!0),f(v,null,b(x.value,(a=>(l(),f("li",{class:"d-flex-between mt20",key:a},[m("span",V,p(u(t)(a.createTime,"YYYY年MM月DD日 HH:mm:ss")),1),m("span",{class:"d-main d-pointer",onClick:s=>C(a._id)},[o(n,{class:"mr5",size:14},{default:d((()=>[o(u(s))])),_:1}),B],8,q)])))),128)),x.value.length?g("",!0):(l(),f("p",G,"暂无历史节点备份"))])])])),_:1},16)}}};export{I as default};
