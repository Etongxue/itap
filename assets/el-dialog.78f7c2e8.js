var e=Object.defineProperty,o=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(o,t,s)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s,r=(e,o)=>{for(var t in o||(o={}))a.call(o,t)&&n(e,t,o[t]);if(s)for(var t of s(o))l.call(o,t)&&n(e,t,o[t]);return e},d=(e,s)=>o(e,t(s));import{as as u,aZ as c,ao as i,f as p,bN as f,aY as m,o as y,a4 as v,a2 as b,aF as g,ac as E,af as C,Q as h,ay as k,W as A,X as S,A as M,x as R,D as T,b1 as x,U as I,aI as L,V as w,C as O,bp as _,bQ as D,k as F,al as B,a9 as N,bU as j,aU as P,aA as Y,b3 as $,bn as z,$ as H,b6 as U,T as X}from"./todo.9d8ad3e1.js";import{b as G,d as V,E as q,_ as K,w as Q}from"./index.88f3c51b.js";import{u as W,b as Z,l as J}from"./index.6fb72867.js";import{d as ee,a as oe,j as te,g as se,e as ae,r as le,N as ne}from"./style.83568f4e.js";import{g as re,C as de}from"./icon.b571cc89.js";import{u as ue,U as ce}from"./index.b2ab0f23.js";import{F as ie,E as pe}from"./focus-trap.50913811.js";import{u as fe}from"./index.172974c9.js";import{u as me,a as ye}from"./index.8ef2203f.js";import{t as ve,a as be}from"./scroll.d4cf4dfc.js";var ge=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(ge||{});const Ee=Symbol("dialogInjectionKey"),Ce=(e,o,t)=>{let s={offsetX:0,offsetY:0};const a=o=>{const t=o.clientX,a=o.clientY,{offsetX:l,offsetY:n}=s,r=e.value.getBoundingClientRect(),d=r.left,u=r.top,c=r.width,i=r.height,p=document.documentElement.clientWidth,f=document.documentElement.clientHeight,m=-d+l,y=-u+n,v=p-d-c+l,b=f-u-i+n,g=o=>{const r=Math.min(Math.max(l+o.clientX-t,m),v),d=Math.min(Math.max(n+o.clientY-a,y),b);s={offsetX:r,offsetY:d},e.value.style.transform=`translate(${oe(r)}, ${oe(d)})`},E=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",E)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",E)},l=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",a)};u((()=>{c((()=>{t.value?o.value&&e.value&&o.value.addEventListener("mousedown",a):l()}))})),i((()=>{l()}))},he=e=>{if(p(e)||ve("[useLockscreen]","You need to pass a ref param to this function"),!f||te(document.body,"el-popup-parent--hidden"))return;let o=0,t=!1,s="0",a=0;const l=()=>{le(document.body,"el-popup-parent--hidden"),t&&(document.body.style.paddingRight=s)};m(e,(e=>{if(!e)return void l();t=!te(document.body,"el-popup-parent--hidden"),t&&(s=document.body.style.paddingRight,a=Number.parseInt(se(document.body,"paddingRight"),10)),o=be();const n=document.documentElement.clientHeight<document.body.scrollHeight,r=se(document.body,"overflowY");o>0&&(n||"scroll"===r)&&t&&(document.body.style.paddingRight=`${a+o}px`),ae(document.body,"el-popup-parent--hidden")})),y((()=>l()))},ke=e=>{if(!e)return{onClick:ne,onMousedown:ne,onMouseup:ne};let o=!1,t=!1;return{onClick:s=>{o&&t&&e(s),o=t=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{t=e.target===e.currentTarget}}};const Ae=v({name:"ElOverlay",props:G({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:V([String,Array,Object])},zIndex:{type:V([String,Number])}}),emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:o,emit:t}){const s=W("overlay"),{onClick:a,onMousedown:l,onMouseup:n}=ke(e.customMaskEvent?void 0:e=>{t("click",e)});return()=>e.mask?b("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:l,onMouseup:n},[g(o,"default")],ge.STYLE|ge.CLASS|ge.PROPS,["onClick","onMouseup","onMousedown"]):E("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[g(o,"default")])}}),Se=G({center:{type:Boolean,default:!1},closeIcon:{type:re,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Me=["aria-label"],Re=["id"];var Te=K(v(d(r({},{name:"ElDialogContent"}),{props:Se,emits:{close:()=>!0},setup(e){const o=e,{t:t}=ue(),{Close:s}=de,{dialogRef:a,headerRef:l,bodyId:n,ns:r,style:d}=C(Ee),{focusTrapRef:u}=C(ie),c=((...e)=>o=>{e.forEach((e=>{ee(e)?e(o):e.value=o}))})(u,a),i=h((()=>o.draggable));return Ce(a,l,i),(e,o)=>(k(),A("div",{ref:R(c),class:M([R(r).b(),R(r).is("fullscreen",e.fullscreen),R(r).is("draggable",R(i)),{[R(r).m("center")]:e.center},e.customClass]),style:O(R(d)),tabindex:"-1",onClick:o[1]||(o[1]=_((()=>{}),["stop"]))},[S("header",{ref_key:"headerRef",ref:l,class:M(R(r).e("header"))},[g(e.$slots,"header",{},(()=>[S("span",{role:"heading",class:M(R(r).e("title"))},T(e.title),3)])),e.showClose?(k(),A("button",{key:0,"aria-label":R(t)("el.dialog.close"),class:M(R(r).e("headerbtn")),type:"button",onClick:o[0]||(o[0]=o=>e.$emit("close"))},[b(R(q),{class:M(R(r).e("close"))},{default:x((()=>[(k(),I(L(e.closeIcon||R(s))))])),_:1},8,["class"])],10,Me)):w("v-if",!0)],2),S("div",{id:R(n),class:M(R(r).e("body"))},[g(e.$slots,"default")],10,Re),e.$slots.footer?(k(),A("footer",{key:0,class:M(R(r).e("footer"))},[g(e.$slots,"footer")],2)):w("v-if",!0)],6))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const xe=G(d(r({},Se),{appendToBody:{type:Boolean,default:!1},beforeClose:{type:V(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,required:!0},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}})),Ie={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ce]:e=>D(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Le=(e,o)=>{const t=N().emit,{nextZIndex:s}=fe();let a="";const l=me(),n=me(),r=F(!1),d=F(!1),c=F(!1),i=F(e.zIndex||s());let p,y;const v=Z("namespace",J),b=h((()=>{const o={},t=`--${v.value}-dialog`;return e.fullscreen||(e.top&&(o[`${t}-margin-top`]=e.top),e.width&&(o[`${t}-width`]=oe(e.width))),o}));function g(){null==y||y(),null==p||p(),e.openDelay&&e.openDelay>0?({stop:p}=j((()=>k()),e.openDelay)):k()}function E(){null==p||p(),null==y||y(),e.closeDelay&&e.closeDelay>0?({stop:y}=j((()=>A()),e.closeDelay)):A()}function C(){e.beforeClose?e.beforeClose((function(e){e||(d.value=!0,r.value=!1)})):E()}function k(){f&&(r.value=!0)}function A(){r.value=!1}return e.lockScroll&&he(r),m((()=>e.modelValue),(a=>{a?(d.value=!1,g(),c.value=!0,t("open"),i.value=e.zIndex?i.value++:s(),B((()=>{o.value&&(o.value.scrollTop=0)}))):r.value&&E()})),m((()=>e.fullscreen),(e=>{o.value&&(e?(a=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=a)})),u((()=>{e.modelValue&&(r.value=!0,c.value=!0,g())})),{afterEnter:function(){t("opened")},afterLeave:function(){t("closed"),t(ce,!1),e.destroyOnClose&&(c.value=!1)},beforeLeave:function(){t("close")},handleClose:C,onModalClick:function(){e.closeOnClickModal&&C()},close:E,doClose:A,onOpenAutoFocus:function(){t("openAutoFocus")},onCloseAutoFocus:function(){t("closeAutoFocus")},onCloseRequested:function(){e.closeOnPressEscape&&C()},titleId:l,bodyId:n,closed:d,style:b,rendered:c,visible:r,zIndex:i}},we=["aria-label","aria-labelledby","aria-describedby"];const Oe=Q(K(v(d(r({},{name:"ElDialog"}),{props:xe,emits:Ie,setup(e,{expose:o}){const t=e,s=P();ye({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},h((()=>!!s.title)));const a=W("dialog"),l=F(),n=F(),r=F(),{visible:d,titleId:u,bodyId:c,style:i,rendered:p,zIndex:f,afterEnter:m,afterLeave:y,beforeLeave:v,handleClose:E,onModalClick:C,onOpenAutoFocus:A,onCloseAutoFocus:T,onCloseRequested:L}=Le(t,l);Y(Ee,{dialogRef:l,headerRef:n,bodyId:c,ns:a,rendered:p,style:i});const _=ke(C),D=h((()=>t.draggable&&!t.fullscreen));return o({visible:d,dialogContentRef:r}),(e,o)=>(k(),I(X,{to:"body",disabled:!e.appendToBody},[b(U,{name:"dialog-fade",onAfterEnter:R(m),onAfterLeave:R(y),onBeforeLeave:R(v),persisted:""},{default:x((()=>[$(b(R(Ae),{"custom-mask-event":"",mask:e.modal,"overlay-class":e.modalClass,"z-index":R(f)},{default:x((()=>[S("div",{role:"dialog","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:R(u),"aria-describedby":R(c),class:M(`${R(a).namespace.value}-overlay-dialog`),onClick:o[0]||(o[0]=(...e)=>R(_).onClick&&R(_).onClick(...e)),onMousedown:o[1]||(o[1]=(...e)=>R(_).onMousedown&&R(_).onMousedown(...e)),onMouseup:o[2]||(o[2]=(...e)=>R(_).onMouseup&&R(_).onMouseup(...e))},[b(R(pe),{loop:"",trapped:R(d),"focus-start-el":"container",onFocusAfterTrapped:R(A),onFocusAfterReleased:R(T),onReleaseRequested:R(L)},{default:x((()=>[R(p)?(k(),I(Te,{key:0,ref_key:"dialogContentRef",ref:r,"custom-class":e.customClass,center:e.center,"close-icon":e.closeIcon,draggable:R(D),fullscreen:e.fullscreen,"show-close":e.showClose,style:O(R(i)),title:e.title,onClose:R(E)},H({header:x((()=>[e.$slots.title?g(e.$slots,"title",{key:1}):g(e.$slots,"header",{key:0,close:R(E),titleId:R(u),titleClass:R(a).e("title")})])),default:x((()=>[g(e.$slots,"default")])),_:2},[e.$slots.footer?{name:"footer",fn:x((()=>[g(e.$slots,"footer")]))}:void 0]),1032,["custom-class","center","close-icon","draggable","fullscreen","show-close","style","title","onClose"])):w("v-if",!0)])),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested"])],42,we)])),_:3},8,["mask","overlay-class","z-index"]),[[z,R(d)]])])),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]));export{Oe as E,Ae as a,he as b,ke as c,xe as d,Ie as e,Le as f,Ce as u};
