var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,r=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&s(e,a,t[a]);if(o)for(var a of o(t))l.call(t,a)&&s(e,a,t[a]);return e};import{Q as i,a9 as u,k as p,bP as d,a4 as c,aS as f,aU as v,n as m,bM as y,aY as b,al as x,as as g,ax as h,u as w,b3 as S,bn as k,ay as $,W as j,V as z,I,A as C,x as E,aF as P,X as O,U as F,b1 as V,aI as A,ak as M,a2 as N,bp as _,D as B,C as R,bN as W}from"./todo.9d8ad3e1.js";import{f as H,b as T,d as K,E as D,_ as L,w as U}from"./index.88f3c51b.js";import{g as q,V as X,v as Q,h as Y,d as Z}from"./icon.b571cc89.js";import{c as G,N as J,i as ee}from"./style.83568f4e.js";import{d as te,u as ae,e as oe}from"./index.90c48122.js";import{m as ne}from"./typescript.72bf8adc.js";import{U as le}from"./index.b2ab0f23.js";import{a as se,u as re}from"./index.f979cd8a.js";import{u as ie}from"./index.6fb72867.js";import{d as ue}from"./scroll.d4cf4dfc.js";import{i as pe}from"./focus-trap.50913811.js";const de=e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e),ce=["class","style"],fe=/^on[A-Z]/,ve=(e={})=>{const{excludeListeners:t=!1,excludeKeys:a}=e,o=i((()=>((null==a?void 0:a.value)||[]).concat(ce))),n=u();return i(n?()=>{var e;return H(Object.entries(null==(e=n.proxy)?void 0:e.$attrs).filter((([e])=>!(o.value.includes(e)||t&&fe.test(e)))))}:()=>({}))};let me;const ye=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function be(e,t=1,a){var o;me||(me=document.createElement("textarea"),document.body.appendChild(me));const{paddingSize:n,borderSize:l,boxSizing:s,contextStyle:r}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:ye.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:n,boxSizing:a}}(e);me.setAttribute("style",`${r};\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`),me.value=e.value||e.placeholder||"";let i=me.scrollHeight;const u={};"border-box"===s?i+=l:"content-box"===s&&(i-=n),me.value="";const p=me.scrollHeight-n;if(d(t)){let e=p*t;"border-box"===s&&(e=e+n+l),i=Math.max(e,i),u.minHeight=`${e}px`}if(d(a)){let e=p*a;"border-box"===s&&(e=e+n+l),i=Math.min(e,i)}return u.height=`${i}px`,null==(o=me.parentNode)||o.removeChild(me),me=void 0,u}const xe=T({id:{type:String,default:void 0},size:te,disabled:Boolean,modelValue:{type:K([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:K([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:q,default:""},prefixIcon:{type:q,default:""},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:K([Object,Array,String]),default:()=>ne({})}}),ge={[le]:e=>G(e),input:e=>G(e),change:e=>G(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},he=["role"],we=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],Se=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder"];var ke;const $e=U(L(c((ke=r({},{name:"ElInput",inheritAttrs:!1}),t(ke,a({props:xe,emits:ge,setup(e,{expose:t,emit:a}){const o=e,n={suffix:"append",prefix:"prepend"},l=u(),s=f(),d=v(),c=i((()=>{const e={};return"combobox"===o.containerRole&&(e["aria-haspopup"]=s["aria-haspopup"],e["aria-owns"]=s["aria-owns"],e["aria-expanded"]=s["aria-expanded"]),e})),H=ve({excludeKeys:i((()=>Object.keys(c.value)))}),{form:T,formItem:K}=se(),{inputId:L}=re(o,{formItemContext:K}),U=ae(),q=oe(),G=ie("input"),te=ie("textarea"),ne=m(),ce=m(),fe=p(!1),me=p(!1),ye=p(!1),xe=p(!1),ge=p(),ke=m(o.inputStyle),$e=i((()=>ne.value||ce.value)),je=i((()=>{var e;return null!=(e=null==T?void 0:T.statusIcon)&&e})),ze=i((()=>(null==K?void 0:K.validateState)||"")),Ie=i((()=>ze.value&&X[ze.value])),Ce=i((()=>xe.value?Q:Y)),Ee=i((()=>[s.style,o.inputStyle])),Pe=i((()=>[o.inputStyle,ke.value,{resize:o.resize}])),Oe=i((()=>pe(o.modelValue)?"":String(o.modelValue))),Fe=i((()=>o.clearable&&!q.value&&!o.readonly&&!!Oe.value&&(fe.value||me.value))),Ve=i((()=>o.showPassword&&!q.value&&!o.readonly&&!!Oe.value&&(!!Oe.value||fe.value))),Ae=i((()=>o.showWordLimit&&!!H.value.maxlength&&("text"===o.type||"textarea"===o.type)&&!q.value&&!o.readonly&&!o.showPassword)),Me=i((()=>Array.from(Oe.value).length)),Ne=i((()=>!!Ae.value&&Me.value>Number(H.value.maxlength))),_e=i((()=>!!d.suffix||!!o.suffixIcon||Fe.value||o.showPassword||Ae.value||!!ze.value&&je.value)),[Be,Re]=function(e){const t=p();return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t.value={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t.value)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t.value;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(ne);y(ce,(e=>{if(!Ae.value||"both"!==o.resize)return;const t=e[0],{width:a}=t.contentRect;ge.value={right:`calc(100% - ${a+15+6}px)`}}));const We=()=>{const{type:e,autosize:t}=o;if(W&&"textarea"===e)if(t){const e=ee(t)?t.minRows:void 0,a=ee(t)?t.maxRows:void 0;ke.value=r({},be(ce.value,e,a))}else ke.value={minHeight:be(ce.value).minHeight}},He=()=>{const e=$e.value;e&&e.value!==Oe.value&&(e.value=Oe.value)},Te=e=>{const{el:t}=l.vnode;if(!t)return;const a=Array.from(t.querySelectorAll(`.${G.e(e)}`)).find((e=>e.parentNode===t));if(!a)return;const o=n[e];d[o]?a.style.transform=`translateX(${"suffix"===e?"-":""}${t.querySelector(`.${G.be("group",o)}`).offsetWidth}px)`:a.removeAttribute("style")},Ke=()=>{Te("prefix"),Te("suffix")},De=async e=>{Be();let{value:t}=e.target;o.formatter&&(t=o.parser?o.parser(t):t,t=o.formatter(t)),ye.value||t!==Oe.value&&(a(le,t),a("input",t),await x(),He(),Re())},Le=e=>{a("change",e.target.value)},Ue=e=>{a("compositionstart",e),ye.value=!0},qe=e=>{var t;a("compositionupdate",e);const o=null==(t=e.target)?void 0:t.value,n=o[o.length-1]||"";ye.value=!de(n)},Xe=e=>{a("compositionend",e),ye.value&&(ye.value=!1,De(e))},Qe=()=>{xe.value=!xe.value,Ye()},Ye=async()=>{var e;await x(),null==(e=$e.value)||e.focus()},Ze=e=>{fe.value=!0,a("focus",e)},Ge=e=>{var t;fe.value=!1,a("blur",e),o.validateEvent&&(null==(t=null==K?void 0:K.validate)||t.call(K,"blur").catch((e=>ue())))},Je=e=>{me.value=!1,a("mouseleave",e)},et=e=>{me.value=!0,a("mouseenter",e)},tt=e=>{a("keydown",e)},at=()=>{a(le,""),a("change",""),a("clear"),a("input","")};return b((()=>o.modelValue),(()=>{var e;x((()=>We())),o.validateEvent&&(null==(e=null==K?void 0:K.validate)||e.call(K,"change").catch((e=>ue())))})),b(Oe,(()=>He())),b((()=>o.type),(async()=>{await x(),He(),We(),Ke()})),g((async()=>{!o.formatter&&o.parser,He(),Ke(),await x(),We()})),h((async()=>{await x(),Ke()})),t({input:ne,textarea:ce,ref:$e,textareaStyle:Pe,autosize:w(o,"autosize"),focus:Ye,blur:()=>{var e;return null==(e=$e.value)?void 0:e.blur()},select:()=>{var e;null==(e=$e.value)||e.select()},clear:at,resizeTextarea:We}),(e,t)=>S(($(),j("div",M(E(c),{class:["textarea"===e.type?E(te).b():E(G).b(),E(G).m(E(U)),E(G).is("disabled",E(q)),E(G).is("exceed",E(Ne)),{[E(G).b("group")]:e.$slots.prepend||e.$slots.append,[E(G).bm("group","append")]:e.$slots.append,[E(G).bm("group","prepend")]:e.$slots.prepend,[E(G).m("prefix")]:e.$slots.prefix||e.prefixIcon,[E(G).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[E(G).bm("suffix","password-clear")]:E(Fe)&&E(Ve)},e.$attrs.class],style:E(Ee),role:e.containerRole,onMouseenter:et,onMouseleave:Je}),[z(" input "),"textarea"!==e.type?($(),j(I,{key:0},[z(" prepend slot "),e.$slots.prepend?($(),j("div",{key:0,class:C(E(G).be("group","prepend"))},[P(e.$slots,"prepend")],2)):z("v-if",!0),O("div",{class:C([E(G).e("wrapper"),E(G).is("focus",fe.value)])},[z(" prefix slot "),e.$slots.prefix||e.prefixIcon?($(),j("span",{key:0,class:C(E(G).e("prefix"))},[O("span",{class:C(E(G).e("prefix-inner"))},[P(e.$slots,"prefix"),e.prefixIcon?($(),F(E(D),{key:0,class:C(E(G).e("icon"))},{default:V((()=>[($(),F(A(e.prefixIcon)))])),_:1},8,["class"])):z("v-if",!0)],2)],2)):z("v-if",!0),O("input",M({id:E(L),ref_key:"input",ref:ne,class:E(G).e("inner")},E(H),{type:e.showPassword?xe.value?"text":"password":e.type,disabled:E(q),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:Ue,onCompositionupdate:qe,onCompositionend:Xe,onInput:De,onFocus:Ze,onBlur:Ge,onChange:Le,onKeydown:tt}),null,16,we),z(" suffix slot "),E(_e)?($(),j("span",{key:1,class:C(E(G).e("suffix"))},[O("span",{class:C(E(G).e("suffix-inner"))},[E(Fe)&&E(Ve)&&E(Ae)?z("v-if",!0):($(),j(I,{key:0},[P(e.$slots,"suffix"),e.suffixIcon?($(),F(E(D),{key:0,class:C(E(G).e("icon"))},{default:V((()=>[($(),F(A(e.suffixIcon)))])),_:1},8,["class"])):z("v-if",!0)],64)),E(Fe)?($(),F(E(D),{key:1,class:C([E(G).e("icon"),E(G).e("clear")]),onMousedown:_(E(J),["prevent"]),onClick:at},{default:V((()=>[N(E(Z))])),_:1},8,["class","onMousedown"])):z("v-if",!0),E(Ve)?($(),F(E(D),{key:2,class:C([E(G).e("icon"),E(G).e("password")]),onClick:Qe},{default:V((()=>[($(),F(A(E(Ce))))])),_:1},8,["class"])):z("v-if",!0),E(Ae)?($(),j("span",{key:3,class:C(E(G).e("count"))},[O("span",{class:C(E(G).e("count-inner"))},B(E(Me))+" / "+B(E(H).maxlength),3)],2)):z("v-if",!0),E(ze)&&E(Ie)&&E(je)?($(),F(E(D),{key:4,class:C([E(G).e("icon"),E(G).e("validateIcon"),E(G).is("loading","validating"===E(ze))])},{default:V((()=>[($(),F(A(E(Ie))))])),_:1},8,["class"])):z("v-if",!0)],2)],2)):z("v-if",!0)],2),z(" append slot "),e.$slots.append?($(),j("div",{key:1,class:C(E(G).be("group","append"))},[P(e.$slots,"append")],2)):z("v-if",!0)],64)):($(),j(I,{key:1},[z(" textarea "),O("textarea",M({id:E(L),ref_key:"textarea",ref:ce,class:E(te).e("inner")},E(H),{tabindex:e.tabindex,disabled:E(q),readonly:e.readonly,autocomplete:e.autocomplete,style:E(Pe),"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:Ue,onCompositionupdate:qe,onCompositionend:Xe,onInput:De,onFocus:Ze,onBlur:Ge,onChange:Le,onKeydown:tt}),null,16,Se),E(Ae)?($(),j("span",{key:0,style:R(ge.value),class:C(E(G).e("count"))},B(E(Me))+" / "+B(E(H).maxlength),7)):z("v-if",!0)],64))],16,he)),[[k,"hidden"!==e.type]])}})))),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{$e as E,de as i,ve as u};
