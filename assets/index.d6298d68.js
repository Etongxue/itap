var e=Object.defineProperty,l=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(l,t,a)=>t in l?e(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a,r=(e,l)=>{for(var t in l||(l={}))o.call(l,t)&&n(e,t,l[t]);if(a)for(var t of a(l))s.call(l,t)&&n(e,t,l[t]);return e},i=(e,a)=>l(e,t(a));import{a4 as c,bs as d,ay as u,W as p,X as m,dN as f,bu as b,cJ as h,bv as y,by as k,bz as v,k as g,Q as x,U as C,b1 as j,A as w,x as V,bJ as _,C as B,aI as z,V as D,a1 as T,D as I,a2 as O,bD as E,aF as U,bB as P,bF as S,cc as $,cm as F,r as A,aY as K,aH as q,b3 as J,I as N,aE as Q,f as G,bo as H,cw as M,aB as R,az as W,cb as X,cF as Y,cG as L}from"./save_config.7e387697.js";import{E as Z}from"./el-input.07836306.js";import{a as ee,E as le}from"./el-select.79d7c506.js";import"./el-scrollbar.80933a65.js";/* empty css                  *//* empty css                *//* empty css                   */import{E as te,a as ae}from"./el-checkbox-group.263c9314.js";import{_ as oe}from"./d-dialog.64ba485e.js";import{m as se,P as ne,x as re,y as ie}from"./main.5f87c81f.js";import{u as ce,E as de}from"./index2.69c4a5bb.js";import"./isEqual.8b269055.js";import"./_baseIsEqual.840160ed.js";import"./index2.dd10852c.js";import"./validator2.fec6f1ba.js";import"./arrow-up.1bfacdc1.js";import"./el-overlay.e22515de.js";import"./event2.b0442ad9.js";const ue=c({name:"QuestionFilled"}),pe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},me=[m("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"},null,-1)];const fe=[...f,"text"],be=b({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:fe,default:"primary"},cancelButtonType:{type:String,values:fe,default:"text"},icon:{type:h,default:d(ue,[["render",function(e,l,t,a,o,s){return u(),p("svg",pe,me)}]])},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},onConfirm:{type:y(Function)},onCancel:{type:y(Function)},teleported:ce.teleported,persistent:ce.persistent});const he=S(P(c(i(r({},{name:"ElPopconfirm"}),{props:be,setup(e){const l=e,{t:t}=k(),a=v("popconfirm"),o=g(),s=()=>{var e,l;null==(l=null==(e=o.value)?void 0:e.onClose)||l.call(e)},n=e=>{var t;null==(t=l.onConfirm)||t.call(l,e),s()},r=e=>{var t;null==(t=l.onCancel)||t.call(l,e),s()},i=x((()=>l.confirmButtonText||t("el.popconfirm.confirmButtonText"))),c=x((()=>l.cancelButtonText||t("el.popconfirm.cancelButtonText")));return(e,l)=>(u(),C(V(de),{ref_key:"tooltipRef",ref:o,trigger:"click",effect:"light","popper-class":`${V(a).namespace.value}-popover`,teleported:e.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":e.hideAfter,persistent:e.persistent},{content:j((()=>[m("div",{class:w(V(a).b())},[m("div",{class:w(V(a).e("main"))},[!e.hideIcon&&e.icon?(u(),C(V(_),{key:0,class:w(V(a).e("icon")),style:B({color:e.iconColor})},{default:j((()=>[(u(),C(z(e.icon)))])),_:1},8,["class","style"])):D("v-if",!0),T(" "+I(e.title),1)],2),m("div",{class:w(V(a).e("action"))},[O(V(E),{size:"small",type:"text"===e.cancelButtonType?"":e.cancelButtonType,text:"text"===e.cancelButtonType,onClick:r},{default:j((()=>[T(I(V(c)),1)])),_:1},8,["type","text"]),O(V(E),{size:"small",type:"text"===e.confirmButtonType?"":e.confirmButtonType,text:"text"===e.confirmButtonType,onClick:n},{default:j((()=>[T(I(V(i)),1)])),_:1},8,["type","text"])],2)],2)])),default:j((()=>[e.$slots.reference?U(e.$slots,"reference",{key:0}):D("v-if",!0)])),_:3},8,["popper-class","teleported","hide-after","persistent"]))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/popconfirm/src/popconfirm.vue"]]));const ye=e=>(R("data-v-2edabc01"),e=e(),W(),e),ke={class:"bookmarks-content wfull hfull"},ve={class:"bookmarks-header bb d-row"},ge=ye((()=>m("li",{class:"pl30 f16 ac d-col-8"},"书签管理",-1))),xe={class:"d-col-8",span:8},Ce={class:"d-col-8",span:8},je=ye((()=>m("div",{class:"d-inline f12 ml20 mr10"},"导入到",-1))),we={class:"f12"},Ve={class:"d-layout hfull"},_e={class:"d-layout-aside d-auto-y",style:{height:"calc(100% - 40px)",width:"160px"}},Be=["onClick"],ze={ref:"refBody",style:{height:"calc(100% - 40px)"},class:"d-layout-content bookmarks-body"},De=T("全选"),Te=T("批量导入"),Ie={class:"body-item d-flex-y",style:{"justify-content":"space-between"}},Oe={key:0,class:"d-cell d-flex"},Ee=["href"],Ue=["src"],Pe={class:"d-elip"},Se={class:"bookmarks-handle",style:{"min-width":"52px"}},$e={name:"appBookmarks"};var Fe=$(Object.assign($e,{setup(e){const l=F(),t=g(!1),a=g(!1);let o=[];const s=A({activeIndex:0,keyword:"",selectData:[],booksData:[],booksChildren:[]});function n(e){s.selectData=e?o:[],a.value=!1}function c(e){const l=e.length;t.value=l===o.length,a.value=l>0&&l<o.length}function d(){if(s.selectData.length){let e=s.booksChildren.filter((e=>s.selectData.includes(e.id)));if(e.length>50)return void X.warning("最多只能导入50条数据");let l=e.map((e=>({backgroundColor:Y(),iconText:e.title.trim().substring(0,2),id:L(),name:e.title,src:"",type:"text",url:e.url})));b.value.children.push(...l),X.success(`批量导入了${l.length}条数据`)}}const f=!(chrome&&chrome.bookmarks),b=x((()=>l.value.find((e=>e.id==se.value))));let h=[];function y(e){e&&!f.value?(s.activeIndex=-1,chrome.bookmarks.search(e,(e=>{s.booksChildren=e||[]}))):(s.activeIndex=0,s.booksChildren=s.booksData[0].children||[])}function k(e){e.edit?chrome.bookmarks.update(e.id,{title:e.title,url:e.url},(l=>{e.edit=!1})):e.edit=!0}function v(e,l){let t=i(r({},l),{children:[]});e.forEach(((e,l)=>{e.url?t.children.push(e):e.children&&v(e.children,e)})),t.children.length&&h.push(t)}return chrome&&chrome.bookmarks&&chrome.bookmarks.getTree((e=>{v(e,{}),s.booksData=h,s.booksData[0]&&(s.booksChildren=s.booksData[0].children||[])})),K((()=>s.booksChildren),(e=>{e.length?(s.selectData=[],o=e.map((e=>e.id))):o=[]})),(e,o)=>{const r=q("lh");return u(),C(oe,{height:"600px",destroyOnClose:!0},{default:j((()=>[m("div",ke,[J((u(),p("ul",ve,[ge,m("li",xe,[O(V(Z),{style:{width:"200px"},placeholder:"搜索",onInput:y,size:"small",modelValue:V(s).keyword,"onUpdate:modelValue":o[0]||(o[0]=e=>V(s).keyword=e)},null,8,["modelValue"])]),m("li",Ce,[je,O(V(le),{modelValue:V(se),"onUpdate:modelValue":o[1]||(o[1]=e=>G(se)?se.value=e:null),style:{width:"100px"},size:"small",placeholder:"group"},{default:j((()=>[(u(!0),p(N,null,Q(V(l),(e=>(u(),C(V(ee),{key:e.id,label:e.name,value:e.id},{default:j((()=>[m("span",we,I(e.name),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])])),[[r,40]]),m("div",Ve,[m("ul",_e,[(u(!0),p(N,null,Q(V(s).booksData,((e,l)=>(u(),p("li",{onClick:t=>function(e,l){s.activeIndex=l,s.booksChildren=e.children||[]}(e,l),class:w([{active:V(s).activeIndex==l},"d-left-tabs-item"]),key:l},I(e.title),11,Be)))),128))]),m("ul",ze,[m("div",null,[O(V(te),{modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=e=>t.value=e),indeterminate:a.value,onChange:n},{default:j((()=>[De])),_:1},8,["modelValue","indeterminate"]),O(V(E),{class:"fr",disabled:!V(s).selectData.length,size:"small",type:"primary",onClick:d},{default:j((()=>[Te])),_:1},8,["disabled"])]),O(V(ae),{modelValue:V(s).selectData,"onUpdate:modelValue":o[3]||(o[3]=e=>V(s).selectData=e),onChange:c},{default:j((()=>[(u(!0),p(N,null,Q(V(s).booksChildren,((e,l)=>(u(),p("div",{class:"body-card","body-style":{padding:"10px"},key:e.id},[(u(),C(V(te),{key:e.id,label:e.id},{default:j((()=>[m("div",Ie,[e.edit?(u(),p("p",Oe,[O(V(Z),{src:`chrome://favicon/size/32@2x/${e.url}`,class:"d-cell",onKeyup:H((l=>k(e)),["enter"]),size:"small",placeholder:"标题",modelValue:e.title,"onUpdate:modelValue":l=>e.title=l},null,8,["src","onKeyup","modelValue","onUpdate:modelValue"]),O(V(Z),{placeholder:"url",class:"d-cell ml5",onKeyup:H((l=>k(e)),["enter"]),size:"small",modelValue:e.url,"onUpdate:modelValue":l=>e.url=l},null,8,["onKeyup","modelValue","onUpdate:modelValue"])])):(u(),p("a",{key:1,href:e.url,target:"_blank",class:"d-flex-y d-hidden"},[m("img",{src:`chrome://favicon/size/32@2x/${e.url}`,class:"mr10"},null,8,Ue),m("span",Pe,I(e.title),1)],8,Ee)),m("p",Se,[O(V(E),{type:"warning",onClick:l=>function(e){let l={backgroundColor:Y(),iconText:e.title.trim().substring(0,4),id:L(),name:e.title,src:"",type:"text",url:e.url};b.value.children.push(l),X.success(`导入【${l.name}】成功`)}(e),size:"small",icon:V(ne)},null,8,["onClick","icon"]),O(V(E),{onClick:l=>k(e),size:"small",type:"primary",icon:e.edit?V(M):V(re)},null,8,["onClick","icon"]),O(V(he),{onConfirm:t=>function(e,l){chrome.bookmarks.remove(e.id,(()=>{s.booksChildren.splice(l,1)}))}(e,l),title:"确认删除?"},{reference:j((()=>[O(V(E),{size:"small",type:"danger",icon:V(ie)},null,8,["icon"])])),_:2},1032,["onConfirm"])])])])),_:2},1032,["label"]))])))),128))])),_:1},8,["modelValue"])],512)])])])),_:1})}}}),[["__scopeId","data-v-2edabc01"]]);export{Fe as default};
