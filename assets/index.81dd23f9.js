import{cc as e,cx as t,k as a,r as s,c7 as l,ca as n,bq as o,aG as i,aH as c,ay as d,U as r,b1 as u,X as m,b3 as f,W as p,I as v,aE as b,A as y,x,b7 as w,D as h,a2 as g,bn as k,V as I,a1 as j,dA as _,bx as B,cG as V,cq as C}from"./save_config.7e387697.js";import{_ as M}from"./d-dialog.64ba485e.js";import{D as Y}from"./d-empty.cdd4b5c2.js";import{E}from"./el-input.07836306.js";import{r as H,P as z}from"./main.5f87c81f.js";import"./el-overlay.e22515de.js";import{a as N}from"./timeFormat.59b65a7c.js";import{_ as L}from"./PinOff16Regular.c1628505.js";import{o as O}from"./orderBy.d224a8b2.js";import{E as D}from"./index2.948aebda.js";import"./_baseOrderBy.2703bb57.js";import"./_baseIsEqual.840160ed.js";import"./identity.737b3aaf.js";import"./index2.ebb82d9e.js";import"./event2.b0442ad9.js";import"./validator2.fec6f1ba.js";var A={};Object.defineProperty(A,"__esModule",{value:!0});const P=H,q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},R=[(0,P.createElementVNode)("g",{fill:"none"},[(0,P.createElementVNode)("path",{d:"M10.059 2.445a1.5 1.5 0 0 0-2.386.354l-2.02 3.79l-2.811.937a.5.5 0 0 0-.196.828L4.793 10.5l-2.647 2.647L2 14l.854-.146L5.5 11.207l2.146 2.147a.5.5 0 0 0 .828-.196l.937-2.81l3.779-2.024a1.5 1.5 0 0 0 .354-2.38L10.06 2.444zm-1.504.824a.5.5 0 0 1 .796-.118l3.485 3.498a.5.5 0 0 1-.118.794L8.764 9.559a.5.5 0 0 0-.238.283l-.744 2.233l-3.856-3.856l2.232-.744a.5.5 0 0 0 .283-.24L8.555 3.27z",fill:"currentColor"})],-1)];var U=A.default=(0,P.defineComponent)({name:"Pin16Regular",render:function(e,t){return(0,P.openBlock)(),(0,P.createElementBlock)("svg",q,R)}}),F={};Object.defineProperty(F,"__esModule",{value:!0});const G=H,S={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},T=[(0,G.createElementVNode)("g",{fill:"none"},[(0,G.createElementVNode)("path",{d:"M6.5 7v4a.5.5 0 0 0 1 0V7a.5.5 0 0 0-1 0zM9 6.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V7a.5.5 0 0 1 .5-.5zM10 4h3a.5.5 0 0 1 0 1h-.553l-.752 6.776A2.5 2.5 0 0 1 9.21 14H6.79a2.5 2.5 0 0 1-2.485-2.224L3.552 5H3a.5.5 0 0 1 0-1h3a2 2 0 1 1 4 0zM8 3a1 1 0 0 0-1 1h2a1 1 0 0 0-1-1zM4.559 5l.74 6.666A1.5 1.5 0 0 0 6.79 13h2.42a1.5 1.5 0 0 0 1.49-1.334L11.442 5H4.56z",fill:"currentColor"})],-1)];var W=F.default=(0,G.defineComponent)({name:"Delete16Regular",render:function(e,t){return(0,G.openBlock)(),(0,G.createElementBlock)("svg",S,T)}});const X={class:"d-layout app-notes hfull"},J={class:"d-layout-aside notes-tabs",width:"200px"},K={class:"f18 bb pl20"},Q=j(" 备忘录 "),Z={class:"d-relative notes-sort fr pr10"},$=["onClick"],ee={class:"f14 b d-elip"},te={class:"f12 d-inline d-sub"},ae=["onClick"],se=["title","onClick"],le={class:"d-layout-content hfull p10 d-bg-input"},ne={key:0,class:"hfull"},oe={class:"ac f12 d-sub mt5"},ie={name:"appNotes"};var ce=e(Object.assign(ie,{setup(e){var j;const H=t(),A=a(null),P=s({activeItem:H.value[0],activeId:null==(j=H.value[0])?void 0:j.id,sortBy:l.get("noteSortBy")||"desc",sortNotes:[]});let q=[];async function R(e){var t;q=await n.get("notes"),q||(q=H._rawValue,await n.set("notes",q));let a=O(q,["ut"],[P.sortBy]);H.value=a.slice(0,3),P.sortNotes=a,"del"==e&&(P.activeId=null==(t=a[0])?void 0:t.id);let s=P.sortNotes.find((e=>e.id==P.activeId))||{};P.activeItem=s}function F(){C("notes")}R();const G=()=>{"desc"==P.sortBy?P.sortBy="asc":P.sortBy="desc",l.set("noteSortBy",P.sortBy),R()};const S=o((async()=>{await n.set("notes",q)}),1e3),T=async()=>{P.activeItem.ut=B().valueOf(),S(),F()};async function ie(){let e={id:V(),title:"",content:"",fixed:!1,ct:B().valueOf(),ut:B().valueOf()};P.activeId=e.id,q.push(e),await n.set("notes",q),R(),requestAnimationFrame((()=>{A.value.focus()})),F()}return(e,t)=>{const a=i("el-icon"),s=c("bg-color");return d(),r(M,{width:"770px",height:"500px"},{default:u((()=>[m("div",X,[f((d(),p("div",J,[m("h2",K,[Q,m("span",Z,[(d(),p(v,null,b(["asc","desc"],((e,t)=>m("i",{key:t,class:y([[{active:x(P).sortBy==e},e],"sort-caret"]),onClick:G},null,2))),64))])]),x(H).length?(d(),r(w,{key:1,tag:"ul",name:"list-complete",class:"notes-tabs-body"},{default:u((()=>[(d(!0),p(v,null,b(x(P).sortNotes,((e,t)=>(d(),p("li",{onClick:t=>(x(P).activeItem=e,x(P).activeId=e.id),class:y([{active:x(P).activeId===e.id},"notes-tabs-item d-elip"]),key:e.id},[m("h4",ee,h(e.title||e.content||"无标题"),1),m("time",te,h(x(N)(e.ut,"YYYY/M/D HH:mm")),1),m("span",{class:"notes-del",title:"删除备忘录",onClick:t=>function(e,t){D.confirm("删除这条备忘录?","提示",{center:!0,type:"warning"}).then((async()=>{let t=q.findIndex((t=>t.id==e.id));q.splice(t,1),await n.set("notes",q),await R("del"),F()}))}(e)},[g(a,{size:18},{default:u((()=>[g(x(W))])),_:1})],8,ae),m("span",{class:"notes-del fixed",title:""+(e.fixed?"取消固定":"固定到桌面"),onClick:t=>async function(e){if(e.fixed=!e.fixed,await n.set("notes",q),e.fixed)_.value.push(e);else{let t=_.value.findIndex((t=>t.id==e.id));_.value.splice(t,1)}F()}(e)},[g(a,{size:18},{default:u((()=>[f(g(x(U),null,null,512),[[k,!e.fixed]]),f(g(x(L),null,null,512),[[k,e.fixed]])])),_:2},1024)],8,se)],10,$)))),128))])),_:1})):(d(),r(Y,{key:0})),m("div",{class:"notes-add d-flex-center",onClick:ie,title:"新增备忘录"},[g(a,null,{default:u((()=>[g(x(z))])),_:1})])])),[[s,"var(--bg-input)"]]),m("div",le,[x(H).length?(d(),p("div",ne,[g(x(E),{ref_key:"refTitle",ref:A,class:"note-title",modelValue:x(P).activeItem.title,"onUpdate:modelValue":t[0]||(t[0]=e=>x(P).activeItem.title=e),onInput:T,placeholder:"请输入笔记标题"},null,8,["modelValue"]),g(x(E),{onInput:T,class:"note-content",type:"textarea",modelValue:x(P).activeItem.content,"onUpdate:modelValue":t[1]||(t[1]=e=>x(P).activeItem.content=e),placeholder:"请输入笔记内容"},null,8,["modelValue"]),m("div",oe," 最后编辑："+h(x(N)(x(P).activeItem.ut,"YYYY-M-D HH:mm:ss"))+", 创建："+h(x(N)(x(P).activeItem.ct,"YYYY-MM-DD HH:mm:ss")),1)])):I("",!0)])])])),_:1})}}}),[["__scopeId","data-v-746925b0"]]);export{ce as default};
