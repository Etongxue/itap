import{bu as e,bq as a,r as t,Q as s,cd as l,aY as o,c0 as i,bt as r,bE as d,aG as c,ay as n,U as p,b1 as m,X as f,a2 as y,W as u,aE as h,x as g,I as b,A as j,a1 as x,D as k,b3 as v,bn as w,bp as T,b7 as I,br as C}from"./todo.9d8ad3e1.js";import{D as _}from"./d-icon.3707ba6f.js";import{_ as D}from"./d-dialog.15134adf.js";/* empty css             *//* empty css                   */import{E as S}from"./el-skeleton-item.cf310736.js";import{E as V,a as W}from"./el-tab-pane.2592ef6d.js";/* empty css                 */import{getTopListApi as E,getTopCategoryApi as L}from"./topsearch.38627a17.js";import{E as z}from"./index.469ed053.js";import{S as O}from"./Select.5e39278e.js";import{D as U}from"./main.bc43ff04.js";import{I as q}from"./InfoFilled.dde03e61.js";import{ElMessage as A}from"./index.8c1ac3e2.js";import"./el-dialog.78f7c2e8.js";import"./index.88f3c51b.js";import"./style.83568f4e.js";import"./index.6fb72867.js";import"./isObject.44842e39.js";import"./icon.b571cc89.js";import"./index.b2ab0f23.js";import"./focus-trap.50913811.js";import"./aria.66f3f71c.js";import"./index.172974c9.js";import"./index.8ef2203f.js";import"./scroll.d4cf4dfc.js";/* empty css                   */import"./Close.ac61f2f5.js";import"./typescript.72bf8adc.js";import"./baseRequest.acdd10d1.js";import"./index.becf6c0c.js";import"./index.90c48122.js";import"./index.f979cd8a.js";import"./config-provider.31e0a14a.js";const F={class:"topsearch-content hfull"},G={class:"d-flex-center",style:{height:"30px","flex-flow":"row"}},Q={class:"pl20 pr20"},R={class:"d-layout hfull bt",style:{height:"calc(100% - 86px)"}},X={class:"d-layout-aside topsearch-aside",style:{width:"21%","min-width":"140px"}},Y=["onClick"],$=["title"],B=["src"],H={class:"d-layout-content mt10 d-auto-y ml20",style:""},J={class:"category-title d-flex-y bb"},K=["src"],M={class:"d-cell"},N={class:"topsearch-body"},P=["href"],Z={class:"item-index mr10"},ee=["title"],ae={class:"f12 ml20 d-sub"},te={name:"appTopsearch"};var se=e(Object.assign(te,{setup(e){const te=a(),se=t({keyWord:"",category:"全部",hotType:[],hostList:[],typeId:"",loading:!1,rowData:{}}),le=s((()=>[{category:"我的订阅"},{category:"全部"},...l(se.hotType,"category")])),oe=(e,a)=>{let t="取消订阅";if("add"==a){if(te.value.topSearch.length>4)return void A.error("最多只能选择5条");te.value.topSearch.push({name:e.name,id:e.id}),t="订阅成功"}else{if(te.value.topSearch.length<2)return void A.error("至少选择1条");let a=te.value.topSearch.findIndex((a=>a.id===e.id));te.value.topSearch.splice(a,1)}A.success(t)},ie=s((()=>te.value.topSearch.map((e=>e.id)))),re=s((()=>se.keyWord?se.hotType.filter((e=>e.name.includes(se.keyWord))):"我的订阅"==se.category?se.hotType.filter((e=>ie.value.includes(e.id))):"全部"!=se.category?se.hotType.filter((e=>e.category==se.category)):se.hotType));o((()=>re.value),(e=>{e.length&&(se.typeId=e[0].id,se.rowData=e[0],de())}));async function de(){se.loading=!0;let e=`searchTopList_${se.typeId}`,a=await i.getItem(e);a&&a.data&&(se.hostList=a.data,se.loading=!1,r().valueOf()<a.exp)||E({id:se.typeId}).then((a=>{let t=a.data||[];t.length&&d.set(e,t,6e5),se.hostList=t})).finally((()=>{se.loading=!1}))}return(async()=>{let e=await d.get("searchTopCategory");e?se.hotType=e:L().then((e=>{C.remove("searchTopCategory");let a=e.data||[];se.hotType=a,a.length&&d.set("searchTopCategory",a,5184e5)}))})(),(e,a)=>{const t=c("el-icon");return n(),p(D,{height:"600px"},{default:m((()=>[f("div",F,[f("p",G,[y(_,{icon:"icon-hotsearch ",size:"80"})]),f("div",Q,[y(g(W),{onTabClick:a[0]||(a[0]=e=>se.keyWord=""),modelValue:se.category,"onUpdate:modelValue":a[1]||(a[1]=e=>se.category=e)},{default:m((()=>[(n(!0),u(b,null,h(g(le),(e=>(n(),p(g(V),{label:e.category,name:e.category,key:e.key},null,8,["label","name"])))),128))])),_:1},8,["modelValue"])]),f("div",R,[f("div",X,[y(g(z),{modelValue:se.keyWord,"onUpdate:modelValue":a[2]||(a[2]=e=>se.keyWord=e),style:{margin:"5px",width:"90%"},size:"small",placeholder:"搜索",clearable:""},null,8,["modelValue"]),y(I,{name:"flip-list",tag:"ul",class:"d-left-tabs"},{default:m((()=>[(n(!0),u(b,null,h(g(re),(e=>(n(),u("li",{class:j(["d-left-tabs-item d-flex-between",{active:se.typeId==e.id}]),onClick:a=>function(e){se.rowData=e,se.typeId=e.id,de()}(e),key:e.id},[f("span",{title:e.name,class:"d-elip",style:{width:"102%"}},[f("img",{class:"icon",src:e.icon,alt:""},null,8,B),x(" "+k(e.name),1)],8,$),v(y(t,{title:"订阅在小组件上显示",class:"tabs-item-select"},{default:m((()=>[g(ie).includes(e.id)?(n(),p(g(U),{key:1,onClick:T((a=>oe(e,"del")),["stop"])},null,8,["onClick"])):(n(),p(g(O),{key:0,onClick:T((a=>oe(e,"add")),["stop"])},null,8,["onClick"]))])),_:2},1536),[[w,g(ie).includes(e.id)]])],10,Y)))),128))])),_:1})]),f("div",H,[f("h2",J,[f("img",{src:se.rowData.icon,alt:""},null,8,K),f("span",M,k(se.rowData.name)+" ‧ "+k(se.rowData.type),1),y(t,{class:"mr20 d-sub",size:"16",title:"本热搜榜单所陈列的热点信息采集自于互联网，我们不对数据源做任何处理，服务器也不会存储任何数据, 链接均跳转至原始网页地址访问. 如果侵犯您的权益,请与我联系,我会尽快处理。同时请大家自行甄别信息真伪,原始网站信息不代表本人及本产品观点.谢谢大家支持."},{default:m((()=>[y(g(q))])),_:1})]),f("ul",N,[y(g(S),{loading:se.loading,rows:3,count:1,animated:""},{default:m((()=>[(n(!0),u(b,null,h(se.hostList,((e,a)=>(n(),u("a",{class:"topsearch-item d-flex-y",href:e.link,key:a,target:"_blank"},[f("span",Z,k(e.index),1),f("span",{class:"d-felx d-cell d-elip",title:e.title},k(e.title),9,ee),f("em",ae,k(e.hotValue),1)],8,P)))),128))])),_:1},8,["loading"])])])])])])),_:1})}}}),[["__scopeId","data-v-f7cd8de2"]]);export{se as default};
