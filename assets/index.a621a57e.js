var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,r=(e,a)=>{for(var t in a||(a={}))l.call(a,t)&&i(e,t,a[t]);if(o)for(var t of o(a))s.call(a,t)&&i(e,t,a[t]);return e},n=(e,o)=>a(e,t(o));import{_ as u}from"./d-dialog.15134adf.js";import{a4 as d,aS as c,k as p,Q as m,bX as f,as as g,ay as v,U as y,b1 as b,X as h,a2 as j,x,W as _,A as w,aE as k,aF as $,a1 as S,D as C,I as L,C as I,$ as O,ak as P,bo as E,bp as q,f as A,al as V,bu as F,r as K,aG as R,aH as U,b3 as W,V as z,bn as B,aB as D,az as T}from"./todo.9d8ad3e1.js";import{j as N,a as H,b as X,c as G,g as M}from"./jingtuitui.c52f9eff.js";/* empty css             */import{E as Q}from"./el-skeleton-item.cf310736.js";/* empty css                 */import{E as J}from"./el-scrollbar.c921a7f2.js";/* empty css                  */import{E as Y}from"./el-image-viewer.373c54a1.js";import{E as Z,a as ee}from"./el-tab-pane.2592ef6d.js";/* empty css                  */import{i as ae}from"./wallpaperDb.b6716285.js";import{l as te}from"./icon.b571cc89.js";import{u as oe,E as le}from"./index.469ed053.js";import{u as se,g as ie,E as re}from"./index.53173a12.js";import{b as ne,d as ue,E as de,_ as ce,w as pe}from"./index.88f3c51b.js";import{N as me,c as fe,i as ge,b as ve}from"./style.83568f4e.js";import{U as ye,I as be,C as he}from"./index.b2ab0f23.js";import{e as je}from"./index.90c48122.js";import{u as xe}from"./index.6fb72867.js";import{t as _e}from"./scroll.d4cf4dfc.js";import{d as we}from"./debounce.86275fe6.js";import{S as ke}from"./Search.ae535b15.js";import{ElButton as $e}from"./index.7243f2d8.js";import"./el-dialog.78f7c2e8.js";import"./focus-trap.50913811.js";import"./aria.66f3f71c.js";import"./index.172974c9.js";import"./index.8ef2203f.js";/* empty css                   */import"./main.bc43ff04.js";import"./Close.ac61f2f5.js";import"./baseRequest.acdd10d1.js";import"./index.becf6c0c.js";import"./typescript.72bf8adc.js";import"./throttle.8deae385.js";import"./isObject.44842e39.js";import"./position.c5cd7449.js";import"./index.f979cd8a.js";import"./event.0bae16b8.js";const Se=ne({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:ue(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:ue([Function,Array]),default:me},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:se.teleported,highlightFirstItem:{type:Boolean,default:!1}}),Ce={[ye]:e=>fe(e),[be]:e=>fe(e),[he]:e=>fe(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>ge(e)},Le=["aria-expanded","aria-owns"],Ie={key:0},Oe=["id","aria-selected","onClick"];const Pe=pe(ce(d(n(r({},{name:"ElAutocomplete",inheritAttrs:!1}),{props:Se,emits:Ce,setup(e,{expose:a,emit:t}){const o=e,l=oe(),s=c(),i=je(),r=xe("autocomplete"),n=p(),u=p(),d=p(),F=p();let K=!1;const R=p([]),U=p(-1),W=p(""),z=p(!1),B=p(!1),D=p(!1),T=m((()=>r.b(String(ie())))),N=m((()=>s.style)),H=m((()=>(R.value.length>0||D.value)&&z.value)),X=m((()=>!o.hideLoading&&D.value)),G=m((()=>n.value?Array.from(n.value.$el.querySelectorAll("input")):[])),M=async()=>{await V(),H.value&&(W.value=`${n.value.$el.offsetWidth}px`)},Q=()=>{K=!0},Y=()=>{K=!1,U.value=-1},Z=we((async e=>{if(B.value)return;const a=e=>{D.value=!1,B.value||(ve(e)?(R.value=e,U.value=o.highlightFirstItem?0:-1):_e("ElAutocomplete","autocomplete suggestions must be an array"))};if(D.value=!0,ve(o.fetchSuggestions))a(o.fetchSuggestions);else{const t=await o.fetchSuggestions(e,a);ve(t)&&a(t)}}),o.debounce),ee=e=>{const a=!!e;if(t(be,e),t(ye,e),B.value=!1,z.value||(z.value=a),!o.triggerOnFocus&&!e)return B.value=!0,void(R.value=[]);Z(e)},ae=e=>{var a;i.value||("INPUT"!==(null==(a=e.target)?void 0:a.tagName)||G.value.includes(document.activeElement))&&(z.value=!0)},se=e=>{t(he,e)},ne=e=>{K||(z.value=!0,t("focus",e),o.triggerOnFocus&&Z(String(o.modelValue)))},ue=e=>{K||t("blur",e)},ce=()=>{z.value=!1,t(ye,""),t("clear")},pe=async()=>{H.value&&U.value>=0&&U.value<R.value.length?ge(R.value[U.value]):o.selectWhenUnmatched&&(t("select",{value:o.modelValue}),R.value=[],U.value=-1)},me=e=>{H.value&&(e.preventDefault(),e.stopPropagation(),fe())},fe=()=>{z.value=!1},ge=async e=>{t(be,e[o.valueKey]),t(ye,e[o.valueKey]),t("select",e),R.value=[],U.value=-1},ke=e=>{if(!H.value||D.value)return;if(e<0)return void(U.value=-1);e>=R.value.length&&(e=R.value.length-1);const a=u.value.querySelector(`.${r.be("suggestion","wrap")}`),t=a.querySelectorAll(`.${r.be("suggestion","list")} li`)[e],o=a.scrollTop,{offsetTop:l,scrollHeight:s}=t;l+s>o+a.clientHeight&&(a.scrollTop+=s),l<o&&(a.scrollTop-=s),U.value=e,n.value.ref.setAttribute("aria-activedescendant",`${T.value}-item-${U.value}`)};return f(F,(()=>{H.value&&fe()})),g((()=>{n.value.ref.setAttribute("role","textbox"),n.value.ref.setAttribute("aria-autocomplete","list"),n.value.ref.setAttribute("aria-controls","id"),n.value.ref.setAttribute("aria-activedescendant",`${T.value}-item-${U.value}`)})),a({highlightedIndex:U,activated:z,loading:D,inputRef:n,popperRef:d,suggestions:R,handleSelect:ge,handleKeyEnter:pe,focus:()=>{var e;null==(e=n.value)||e.focus()},blur:()=>{var e;null==(e=n.value)||e.blur()},close:fe,highlight:ke}),(e,a)=>(v(),y(x(re),{ref_key:"popperRef",ref:d,visible:x(H),"onUpdate:visible":a[2]||(a[2]=e=>A(H)?H.value=e:null),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[x(r).e("popper"),e.popperClass],teleported:e.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${x(r).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:M,onShow:Q,onHide:Y},{content:b((()=>[h("div",{ref_key:"regionRef",ref:u,class:w([x(r).b("suggestion"),x(r).is("loading",x(X))]),style:I({minWidth:W.value,outline:"none"}),role:"region"},[j(x(J),{id:x(T),tag:"ul","wrap-class":x(r).be("suggestion","wrap"),"view-class":x(r).be("suggestion","list"),role:"listbox"},{default:b((()=>[x(X)?(v(),_("li",Ie,[j(x(de),{class:w(x(r).is("loading"))},{default:b((()=>[j(x(te))])),_:1},8,["class"])])):(v(!0),_(L,{key:1},k(R.value,((a,t)=>(v(),_("li",{id:`${x(T)}-item-${t}`,key:t,class:w({highlighted:U.value===t}),role:"option","aria-selected":U.value===t,onClick:e=>ge(a)},[$(e.$slots,"default",{item:a},(()=>[S(C(a[e.valueKey]),1)]))],10,Oe)))),128))])),_:3},8,["id","wrap-class","view-class"])],6)])),default:b((()=>[h("div",{ref_key:"listboxRef",ref:F,class:w([x(r).b(),e.$attrs.class]),style:I(x(N)),role:"combobox","aria-haspopup":"listbox","aria-expanded":x(H),"aria-owns":x(T)},[j(x(le),P({ref_key:"inputRef",ref:n},x(l),{"model-value":e.modelValue,onInput:ee,onChange:se,onFocus:ne,onBlur:ue,onClear:ce,onKeydown:[a[0]||(a[0]=E(q((e=>ke(U.value-1)),["prevent"]),["up"])),a[1]||(a[1]=E(q((e=>ke(U.value+1)),["prevent"]),["down"])),E(pe,["enter"]),E(fe,["tab"]),E(me,["esc"])],onMousedown:ae}),O({_:2},[e.$slots.prepend?{name:"prepend",fn:b((()=>[$(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:b((()=>[$(e.$slots,"append")]))}:void 0,e.$slots.prefix?{name:"prefix",fn:b((()=>[$(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:b((()=>[$(e.$slots,"suffix")]))}:void 0]),1040,["model-value","onKeydown"])],14,Le)])),_:3},8,["visible","placement","popper-class","teleported","transition"]))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]));const Ee=e=>(D("data-v-19e61494"),e=e(),T(),e),qe={class:"remai-content hfull"},Ae={style:{"background-color":"var(--bg-card)"}},Ve={class:"ac pt10 d-flex-between remai-search"},Fe={class:"remai-search",style:{"margin-top":"4px"}},Ke=["onClick"],Re={class:"pl20 pr20"},Ue={class:"d-layout hfull bt",style:{height:"calc(100% - 60px)","margin-top":"0px"}},We={class:"d-layout-content mt10 d-auto-y ml10",style:{height:"calc(100% - 60px)"},"infinite-scroll-delay":"500","infinite-scroll-immediate":!1},ze={key:0,class:"mb10"},Be=S(" 为您找到 "),De={style:{color:"#e74737"}},Te=S(" 相关的结果 "),Ne={style:{color:"#e74737"}},He=S("个 "),Xe={class:"remai-body d-flex"},Ge=["onClick"],Me={style:{padding:"16px"}},Qe=["title"],Je={class:"price"},Ye=Ee((()=>h("em",{class:"f12",style:{"vertical-align":"-2px"}},"券后￥",-1))),Ze={class:"f16 b",style:{"vertical-align":"-2px"}},ea={class:"fr couponlink"},aa={class:"ac"},ta=S("加载更多"),oa={name:"appRemai"};var la=F({name:"remai",components:{Content:F(Object.assign(oa,{setup(e){const a=K({category:"jd_today_top",categoryList:[{name:"热卖",api:"jd_today_top"},{name:"好货",api:"jd_goods"},{name:"9块9",api:"jd_nine"},{name:"排行",api:"jd_subsidy_goods"},{name:"京东拼购",api:"jd_collage"},{name:"京东自营",api:"jd_self"}],hotSearch:[],total_count:0,goodsOptions:[],goodList:[],loading:!1,moreLoading:!1,rowData:{},queryParams:{pageIndex:1,pageSize:24}});function t(){l(1)}const o=async e=>{a.keyword="",1==e?(a.queryParams.pageIndex++,a.moreLoading=!0):(a.loading=!0,a.queryParams.pageIndex=1);let t=`remai_${a.category}_${a.queryParams.eliteId}_${a.queryParams.pageIndex}`,o=await ae.get(t);if(o)return a.goodList=1==e?[...a.goodList,...o]:o,a.moreLoading=!1,void(a.loading=!1);H[a.category](n(r({},a.queryParams),{v:"v2"})).then((o=>{let l=o.data||o.brand_list||[];ae.set(t,l,72e5),a.goodList=1==e?[...a.goodList,...l]:l})).finally((()=>{a.loading=!1,a.moreLoading=!1}))};function l(e){a.keyword?i(e):o(e)}o(),N({v:"v1"}).then((e=>{a.hotSearch=e.hotWords||[]}));const s=(e,t)=>{e||!a.hotWords?G({word:e,v:"v1"}).then((e=>{t((e||[]).map((e=>({value:e.kw}))))})):cd(a.hotWords)};function i(e){1==e?(a.queryParams.pageIndex++,a.moreLoading=!0):(a.loading=!0,a.queryParams.pageIndex--),M(n(r({},a.queryParams),{keyword:a.keyword,v:"v2"})).then((t=>{let o=t.data||[];a.goodList=1==e?[...a.goodList,...o]:o,a.total_count=t.total_count||0})).finally((()=>{a.loading=!1,a.moreLoading=!1}))}return(e,r)=>{const n=R("el-icon"),u=U("infinite-scroll");return v(),_("div",qe,[h("div",Ae,[h("div",Ve,[j(x(Pe),{size:"default",style:{width:"100%"},modelValue:a.keyword,"onUpdate:modelValue":r[0]||(r[0]=e=>a.keyword=e),filterable:"",remote:"",onKeyup:E(i,["enter"]),onChange:i,"reserve-keyword":"",placeholder:"粘贴商品标题，先领取再购物","fetch-suggestions":s},null,8,["modelValue","onKeyup"]),h("button",{class:"d-button",onClick:i},[j(n,{size:16},{default:b((()=>[j(x(ke))])),_:1})])]),h("p",Fe,[(v(!0),_(L,null,k(a.hotSearch,(e=>(v(),_("span",{onClick:t=>{return o=e,a.keyword=o,void i();var o},class:"f12 hot d-sub",key:e},C(e),9,Ke)))),128))]),h("div",Re,[j(x(ee),{onTabClick:o,modelValue:a.category,"onUpdate:modelValue":r[1]||(r[1]=e=>a.category=e)},{default:b((()=>[(v(!0),_(L,null,k(a.categoryList,(e=>(v(),y(x(Z),{label:e.name,name:e.api,key:e.api},null,8,["label","name"])))),128))])),_:1},8,["modelValue"])])]),h("div",Ue,[W((v(),_("div",We,[a.keyword?(v(),_("p",ze,[Be,h("span",De,C(a.keyword),1),Te,h("span",Ne,C(a.total_count),1),He])):z("",!0),h("ul",Xe,[j(x(Q),{loading:a.loading,rows:3,count:1,animated:""},{default:b((()=>[(v(!0),_(L,null,k(a.goodList,(e=>(v(),_("li",{onClick:a=>function(e){let a={gid:e.goods_link,unionid:1000360070,positionid:3004143482};X(a).then((e=>{window.open(e.link,"_blank")}))}(e),class:"remai-item",key:e.goods_id,target:"_blank"},[j(x(Y),{fit:"cover",lazy:"",style:{height:"204px"},class:"hfull wfull",src:e.goods_img},null,8,["src"]),h("div",Me,[h("p",{class:"title",title:e.short_name||e.jd_title},C(e.short_name),9,Qe),h("p",Je,[Ye,h("em",Ze,C(e.final_price),1),h("a",ea,"领"+C(e.discount_price)+"元券",1)])])],8,Ge)))),128))])),_:1},8,["loading"])]),h("div",aa,[W(j(x($e),{onClick:r[2]||(r[2]=e=>l(1)),loading:a.moreLoading,style:{width:"120px"},size:"small"},{default:b((()=>[ta])),_:1},8,["loading"]),[[B,!a.loading]])])])),[[u,t]])])])}}}),[["__scopeId","data-v-19e61494"]]),DDialog:u},setup:(e,a)=>({})},[["render",function(e,a,t,o,l,s){const i=R("content"),r=R("d-dialog");return v(),y(r,{height:"640px",destroyOnClose:!0},{default:b((()=>[j(i)])),_:1})}]]);export{la as default};
