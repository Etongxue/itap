var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,d=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&n(e,a,t[a]);if(s)for(var a of s(t))r.call(t,a)&&n(e,a,t[a]);return e},o=(e,s)=>t(e,a(s));import{a4 as c,bt as i,Q as m,ay as u,W as p,I as y,aE as f,D as h,x as v,V as k,X as b,A as g,aF as x,k as O,a2 as w,b1 as j,a1 as D,$,B as C,ab as S,U as _}from"./todo.9d8ad3e1.js";import{ElButton as P,ElButtonGroup as M}from"./index.7243f2d8.js";import{r as V,l as A,W as I}from"./utils.c311578b.js";import{b as Y,d as z,_ as E,w as H}from"./index.88f3c51b.js";import{i as B,l as F,b as U}from"./style.83568f4e.js";import{u as W,U as q,I as Q}from"./index.b2ab0f23.js";import{u as R}from"./index.6fb72867.js";import"./icon.b571cc89.js";import"./index.90c48122.js";import"./index.8ef2203f.js";import"./index.f979cd8a.js";import"./isObject.44842e39.js";const T=Y({selectedDay:{type:z(Object)},range:{type:z(Array)},date:{type:z(Object),required:!0},hideHeader:{type:Boolean}}),X={pick:e=>B(e)},G={key:0},J=["onClick"];var K=E(c(o(d({},{name:"DateTable"}),{props:T,emits:X,setup(e,{expose:t,emit:a}){const s=e;i.extend(A);const{t:l,lang:r}=W(),n=R("calendar-table"),d=R("calendar-day"),o=i().locale(r.value),c=o.$locale().weekStart||0,O=m((()=>!!s.range&&!!s.range.length)),w=m((()=>{let e=[];if(O.value){const[t,a]=s.range,l=V(a.date()-t.date()+1).map((e=>({text:t.date()+e,type:"current"})));let r=l.length%7;r=0===r?0:7-r;const n=V(r).map(((e,t)=>({text:t+1,type:"next"})));e=l.concat(n)}else{const t=s.date.startOf("month").day(),a=((e,t)=>{const a=e.subtract(1,"month").endOf("month").date();return V(t).map(((e,s)=>a-(t-s-1)))})(s.date,t-c).map((e=>({text:e,type:"prev"}))),l=(e=>{const t=e.daysInMonth();return V(t).map(((e,t)=>t+1))})(s.date).map((e=>({text:e,type:"current"})));e=[...a,...l];const r=7-(e.length%7||7),n=V(r).map(((e,t)=>({text:t+1,type:"next"})));e=e.concat(n)}return(e=>V(e.length/7).map((t=>{const a=7*t;return e.slice(a,a+7)})))(e)})),j=m((()=>{const e=c;return 0===e?I.map((e=>l(`el.datepicker.weeks.${e}`))):I.slice(e).concat(I.slice(0,e)).map((e=>l(`el.datepicker.weeks.${e}`)))})),D=(e,t)=>{switch(t){case"prev":return s.date.startOf("month").subtract(1,"month").date(e);case"next":return s.date.startOf("month").add(1,"month").date(e);case"current":return s.date.date(e)}},$=({text:e,type:t})=>{const a=[t];if("current"===t){const l=D(e,t);l.isSame(s.selectedDay,"day")&&a.push(d.is("selected")),l.isSame(o,"day")&&a.push(d.is("today"))}return a},C=({text:e,type:t})=>{const a=D(e,t);return{isSelected:a.isSame(s.selectedDay),type:`${t}-month`,day:a.format("YYYY-MM-DD"),date:a.toDate()}};return t({getFormattedDate:D}),(e,t)=>(u(),p("table",{class:g([v(n).b(),v(n).is("range",v(O))]),cellspacing:"0",cellpadding:"0"},[e.hideHeader?k("v-if",!0):(u(),p("thead",G,[(u(!0),p(y,null,f(v(j),(e=>(u(),p("th",{key:e},h(e),1)))),128))])),b("tbody",null,[(u(!0),p(y,null,f(v(w),((t,s)=>(u(),p("tr",{key:s,class:g({[v(n).e("row")]:!0,[v(n).em("row","hide-border")]:0===s&&e.hideHeader})},[(u(!0),p(y,null,f(t,((t,s)=>(u(),p("td",{key:s,class:g($(t)),onClick:e=>(({text:e,type:t})=>{const s=D(e,t);a("pick",s)})(t)},[b("div",{class:g(v(d).b())},[x(e.$slots,"dateCell",{data:C(t)},(()=>[b("span",null,h(t.text),1)]))],2)],10,J)))),128))],2)))),128))])],2))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/date-table.vue"]]);const L=Y({modelValue:{type:Date},range:{type:z(Array),validator:e=>U(e)&&2===e.length&&e.every((e=>F(e)))}}),N={[q]:e=>F(e),[Q]:e=>F(e)};const Z=H(E(c(o(d({},{name:"ElCalendar"}),{props:L,emits:N,setup(e,{expose:t,emit:a}){const s=e,l=R("calendar"),{t:r,lang:n}=W(),d=O(),o=i().locale(n.value),c=m({get:()=>s.modelValue?A.value:d.value,set(e){if(!e)return;d.value=e;const t=e.toDate();a(Q,t),a(q,t)}}),V=m((()=>{if(!s.range)return[];const e=s.range.map((e=>i(e).locale(n.value))),[t,a]=e;return t.isAfter(a)?[]:t.isSame(a,"month")?B(t,a):t.add(1,"month").month()!==a.month()?[]:B(t,a)})),A=m((()=>s.modelValue?i(s.modelValue).locale(n.value):c.value?c.value:V.value.length?V.value[0][0]:o)),I=m((()=>A.value.subtract(1,"month").date(1))),Y=m((()=>A.value.add(1,"month").date(1))),z=m((()=>A.value.subtract(1,"year").date(1))),E=m((()=>A.value.add(1,"year").date(1))),H=m((()=>{const e=`el.datepicker.month${A.value.format("M")}`;return`${A.value.year()} ${r("el.datepicker.year")} ${r(e)}`})),B=(e,t)=>{const a=e.startOf("week"),s=t.endOf("week"),l=a.get("month"),r=s.get("month");if(l===r)return[[a,s]];if(l+1===r){const e=a.endOf("month"),t=s.startOf("month"),l=e.isSame(t,"week");return[[a,e],[(l?t.add(1,"week"):t).startOf("week"),s]]}if(l+2===r||(l+1)%11===r){const e=a.endOf("month"),t=a.add(1,"month").startOf("month"),l=e.isSame(t,"week")?t.add(1,"week"):t,r=l.endOf("month"),n=s.startOf("month"),d=r.isSame(n,"week")?n.add(1,"week"):n;return[[a,e],[l.startOf("week"),r],[d.startOf("week"),s]]}return[]},F=e=>{c.value=e},U=e=>{let t;t="prev-month"===e?I.value:"next-month"===e?Y.value:"prev-year"===e?z.value:"next-year"===e?E.value:o,t.isSame(A.value,"day")||F(t)};return t({selectedDay:c,pickDay:F,selectDate:U,calculateValidatedDateRange:B}),(e,t)=>(u(),p("div",{class:g(v(l).b())},[b("div",{class:g(v(l).e("header"))},[x(e.$slots,"header",{date:v(H)},(()=>[b("div",{class:g(v(l).e("title"))},h(v(H)),3),0===v(V).length?(u(),p("div",{key:0,class:g(v(l).e("button-group"))},[w(v(M),null,{default:j((()=>[w(v(P),{size:"small",onClick:t[0]||(t[0]=e=>U("prev-month"))},{default:j((()=>[D(h(v(r)("el.datepicker.prevMonth")),1)])),_:1}),w(v(P),{size:"small",onClick:t[1]||(t[1]=e=>U("today"))},{default:j((()=>[D(h(v(r)("el.datepicker.today")),1)])),_:1}),w(v(P),{size:"small",onClick:t[2]||(t[2]=e=>U("next-month"))},{default:j((()=>[D(h(v(r)("el.datepicker.nextMonth")),1)])),_:1})])),_:1})],2)):k("v-if",!0)]))],2),0===v(V).length?(u(),p("div",{key:0,class:g(v(l).e("body"))},[w(K,{date:v(A),"selected-day":v(c),onPick:F},$({_:2},[e.$slots.dateCell?{name:"dateCell",fn:j((t=>[x(e.$slots,"dateCell",C(S(t)))]))}:void 0]),1032,["date","selected-day"])],2)):(u(),p("div",{key:1,class:g(v(l).e("body"))},[(u(!0),p(y,null,f(v(V),((t,a)=>(u(),_(K,{key:a,date:t[0],"selected-day":v(c),range:t,"hide-header":0!==a,onPick:F},$({_:2},[e.$slots.dateCell?{name:"dateCell",fn:j((t=>[x(e.$slots,"dateCell",C(S(t)))]))}:void 0]),1032,["date","selected-day","range","hide-header"])))),128))],2))],2))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/calendar.vue"]]));export{Z as ElCalendar,N as calendarEmits,L as calendarProps,Z as default};
