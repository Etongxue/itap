var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,a)=>{for(var t in a||(a={}))o.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))s.call(a,t)&&n(e,t,a[t]);return e},r=(e,l)=>a(e,t(l));import{_ as u}from"./d-dialog.64ba485e.js";import{bu as d,bv as c,dc as p,bC as g,bH as m,bw as f,a4 as v,bz as y,aS as b,k as h,Q as _,c_ as k,bq as w,de as x,as as j,ay as $,U as S,b1 as L,X as C,a2 as O,x as I,W as P,bJ as E,A as q,dX as V,aE as A,aF as F,a1 as z,D as B,I as K,C as W,$ as D,ak as R,bo as U,bp as T,f as H,bB as X,al as N,bS as G,bF as J,cc as Q,r as Y,aG as M,aH as Z,b3 as ee,V as ae,bD as te,bn as le,aB as oe,az as se}from"./save_config.7e387697.js";import{U as ne,l as ie,V as re,W as ue,X as de,Y as ce}from"./main.5f87c81f.js";import{E as pe}from"./el-skeleton-item.c18dff8f.js";import{u as ge,E as me}from"./el-input.07836306.js";import{E as fe}from"./el-scrollbar.80933a65.js";/* empty css                  */import{E as ve}from"./el-image-viewer.560b8f55.js";import{E as ye,a as be}from"./el-tabs.9629dce2.js";import{i as he}from"./wallpaperDb.a302f175.js";import{u as _e,g as ke,E as we}from"./index2.69c4a5bb.js";import"./el-overlay.e22515de.js";import"./zoom-in.275d1c48.js";import"./plus.8a11ae65.js";import"./event2.b0442ad9.js";const xe=d({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:c(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:c([Function,Array]),default:p},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:_e.teleported,highlightFirstItem:{type:Boolean,default:!1}}),je={[g]:e=>m(e),input:e=>m(e),change:e=>m(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>f(e)},$e=["aria-expanded","aria-owns"],Se={key:0},Le=["id","aria-selected","onClick"];const Ce=J(X(v(r(i({},{name:"ElAutocomplete",inheritAttrs:!1}),{props:xe,emits:je,setup(e,{expose:a,emit:t}){const l=e,o=y("autocomplete");let s=!1;const n=ge(),i=b(),r=h([]),u=h(-1),d=h(""),c=h(!1),p=h(!1),m=h(!1),f=h(),v=h(),X=h(),J=h(),Q=_((()=>o.b(String(ke())))),Y=_((()=>i.style)),M=_((()=>(k(r.value)&&r.value.length>0||m.value)&&c.value)),Z=_((()=>!l.hideLoading&&m.value)),ee=()=>{N((()=>{M.value&&(d.value=`${f.value.$el.offsetWidth}px`)}))},ae=w((async e=>{if(p.value)return;m.value=!0;const a=e=>{m.value=!1,p.value||(k(e)?(r.value=e,u.value=l.highlightFirstItem?0:-1):G("ElAutocomplete","autocomplete suggestions must be an array"))};if(k(l.fetchSuggestions))a(l.fetchSuggestions);else{const t=await l.fetchSuggestions(e,a);k(t)&&a(t)}}),l.debounce),te=e=>{const a=Boolean(e);if(t("input",e),t(g,e),p.value=!1,c.value||(c.value=s&&a),!l.triggerOnFocus&&!e)return p.value=!0,void(r.value=[]);s&&a&&(s=!1),ae(e)},le=e=>{t("change",e)},oe=e=>{c.value=!0,t("focus",e),l.triggerOnFocus&&ae(String(l.modelValue))},se=e=>{t("blur",e)},ne=()=>{c.value=!1,s=!0,t(g,""),t("clear")},ie=()=>{M.value&&u.value>=0&&u.value<r.value.length?ue(r.value[u.value]):l.selectWhenUnmatched&&(t("select",{value:l.modelValue}),N((()=>{r.value=[],u.value=-1})))},re=()=>{c.value=!1},ue=e=>{t("input",e[l.valueKey]),t(g,e[l.valueKey]),t("select",e),N((()=>{r.value=[],u.value=-1}))},de=e=>{if(!M.value||m.value)return;if(e<0)return void(u.value=-1);e>=r.value.length&&(e=r.value.length-1);const a=v.value.querySelector(`.${o.be("suggestion","wrap")}`),t=a.querySelectorAll(`.${o.be("suggestion","list")} li`)[e],l=a.scrollTop,{offsetTop:s,scrollHeight:n}=t;s+n>l+a.clientHeight&&(a.scrollTop+=n),s<l&&(a.scrollTop-=n),u.value=e,f.value.ref.setAttribute("aria-activedescendant",`${Q.value}-item-${u.value}`)};return x(J,re),j((()=>{f.value.ref.setAttribute("role","textbox"),f.value.ref.setAttribute("aria-autocomplete","list"),f.value.ref.setAttribute("aria-controls","id"),f.value.ref.setAttribute("aria-activedescendant",`${Q.value}-item-${u.value}`)})),a({highlightedIndex:u,activated:c,loading:m,inputRef:f,popperRef:X,suggestions:r,handleSelect:ue,handleKeyEnter:ie,focus:()=>{var e;null==(e=f.value)||e.focus()},close:re,highlight:de}),(e,a)=>($(),S(I(we),{ref_key:"popperRef",ref:X,visible:I(M),"onUpdate:visible":a[2]||(a[2]=e=>H(M)?M.value=e:null),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[I(o).e("popper"),e.popperClass],teleported:e.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${I(o).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:ee},{content:L((()=>[C("div",{ref_key:"regionRef",ref:v,class:q([I(o).b("suggestion"),I(o).is("loading",I(Z))]),style:W({minWidth:d.value,outline:"none"}),role:"region"},[O(I(fe),{id:I(Q),tag:"ul","wrap-class":I(o).be("suggestion","wrap"),"view-class":I(o).be("suggestion","list"),role:"listbox"},{default:L((()=>[I(Z)?($(),P("li",Se,[O(I(E),{class:q(I(o).is("loading"))},{default:L((()=>[O(I(V))])),_:1},8,["class"])])):($(!0),P(K,{key:1},A(r.value,((a,t)=>($(),P("li",{id:`${I(Q)}-item-${t}`,key:t,class:q({highlighted:u.value===t}),role:"option","aria-selected":u.value===t,onClick:e=>ue(a)},[F(e.$slots,"default",{item:a},(()=>[z(B(a[e.valueKey]),1)]))],10,Le)))),128))])),_:3},8,["id","wrap-class","view-class"])],6)])),default:L((()=>[C("div",{ref_key:"listboxRef",ref:J,class:q([I(o).b(),e.$attrs.class]),style:W(I(Y)),role:"combobox","aria-haspopup":"listbox","aria-expanded":I(M),"aria-owns":I(Q)},[O(I(me),R({ref_key:"inputRef",ref:f},I(n),{"model-value":e.modelValue,onInput:te,onChange:le,onFocus:oe,onBlur:se,onClear:ne,onKeydown:[a[0]||(a[0]=U(T((e=>de(u.value-1)),["prevent"]),["up"])),a[1]||(a[1]=U(T((e=>de(u.value+1)),["prevent"]),["down"])),U(ie,["enter"]),U(re,["tab"])]}),D({_:2},[e.$slots.prepend?{name:"prepend",fn:L((()=>[F(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:L((()=>[F(e.$slots,"append")]))}:void 0,e.$slots.prefix?{name:"prefix",fn:L((()=>[F(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:L((()=>[F(e.$slots,"suffix")]))}:void 0]),1040,["model-value","onKeydown"])],14,$e)])),_:3},8,["visible","placement","popper-class","teleported","transition"]))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]));const Oe=e=>(oe("data-v-19e61494"),e=e(),se(),e),Ie={class:"remai-content hfull"},Pe={style:{"background-color":"var(--bg-card)"}},Ee={class:"ac pt10 d-flex-between remai-search"},qe={class:"remai-search",style:{"margin-top":"4px"}},Ve=["onClick"],Ae={class:"pl20 pr20"},Fe={class:"d-layout hfull bt",style:{height:"calc(100% - 60px)","margin-top":"0px"}},ze={class:"d-layout-content mt10 d-auto-y ml10",style:{height:"calc(100% - 60px)"},"infinite-scroll-delay":"500","infinite-scroll-immediate":!1},Be={key:0,class:"mb10"},Ke=z(" 为您找到 "),We={style:{color:"#e74737"}},De=z(" 相关的结果 "),Re={style:{color:"#e74737"}},Ue=z("个 "),Te={class:"remai-body d-flex"},He=["onClick"],Xe={style:{padding:"16px"}},Ne=["title"],Ge={class:"price"},Je=Oe((()=>C("em",{class:"f12",style:{"vertical-align":"-2px"}},"券后￥",-1))),Qe={class:"f16 b",style:{"vertical-align":"-2px"}},Ye={class:"fr couponlink"},Me={class:"ac"},Ze=z("加载更多"),ea={name:"appRemai"};var aa=Q({name:"remai",components:{Content:Q(Object.assign(ea,{setup(e){const a=Y({category:"jd_today_top",categoryList:[{name:"热卖",api:"jd_today_top"},{name:"好货",api:"jd_goods"},{name:"9块9",api:"jd_nine"},{name:"排行",api:"jd_subsidy_goods"},{name:"京东拼购",api:"jd_collage"},{name:"京东自营",api:"jd_self"}],hotSearch:[],total_count:0,goodsOptions:[],goodList:[],loading:!1,moreLoading:!1,rowData:{},queryParams:{pageIndex:1,pageSize:24}});function t(){o(1)}const l=async e=>{a.keyword="",1==e?(a.queryParams.pageIndex++,a.moreLoading=!0):(a.loading=!0,a.queryParams.pageIndex=1);let t=`remai_${a.category}_${a.queryParams.eliteId}_${a.queryParams.pageIndex}`,l=await he.get(t);if(l)return a.goodList=1==e?[...a.goodList,...l]:l,a.moreLoading=!1,void(a.loading=!1);re[a.category](r(i({},a.queryParams),{v:"v2"})).then((l=>{let o=l.data||l.brand_list||[];he.set(t,o,72e5),a.goodList=1==e?[...a.goodList,...o]:o})).finally((()=>{a.loading=!1,a.moreLoading=!1}))};function o(e){a.keyword?n(e):l(e)}l(),ne({v:"v1"}).then((e=>{a.hotSearch=e.hotWords||[]}));const s=(e,t)=>{e||!a.hotWords?de({word:e,v:"v1"}).then((e=>{t((e||[]).map((e=>({value:e.kw}))))})):cd(a.hotWords)};function n(e){1==e?(a.queryParams.pageIndex++,a.moreLoading=!0):(a.loading=!0,a.queryParams.pageIndex--),ce(r(i({},a.queryParams),{keyword:a.keyword,v:"v2"})).then((t=>{let l=t.data||[];a.goodList=1==e?[...a.goodList,...l]:l,a.total_count=t.total_count||0})).finally((()=>{a.loading=!1,a.moreLoading=!1}))}return(e,i)=>{const r=M("el-icon"),u=Z("infinite-scroll");return $(),P("div",Ie,[C("div",Pe,[C("div",Ee,[O(I(Ce),{size:"default",style:{width:"100%"},modelValue:I(a).keyword,"onUpdate:modelValue":i[0]||(i[0]=e=>I(a).keyword=e),filterable:"",remote:"",onKeyup:U(n,["enter"]),onChange:n,"reserve-keyword":"",placeholder:"粘贴商品标题，先领取再购物","fetch-suggestions":s},null,8,["modelValue","onKeyup"]),C("button",{class:"d-button",onClick:n},[O(r,{size:16},{default:L((()=>[O(I(ie))])),_:1})])]),C("p",qe,[($(!0),P(K,null,A(I(a).hotSearch,(e=>($(),P("span",{onClick:t=>{return l=e,a.keyword=l,void n();var l},class:"f12 hot d-sub",key:e},B(e),9,Ve)))),128))]),C("div",Ae,[O(I(be),{onTabClick:l,modelValue:I(a).category,"onUpdate:modelValue":i[1]||(i[1]=e=>I(a).category=e)},{default:L((()=>[($(!0),P(K,null,A(I(a).categoryList,(e=>($(),S(I(ye),{label:e.name,name:e.api,key:e.api},null,8,["label","name"])))),128))])),_:1},8,["modelValue"])])]),C("div",Fe,[ee(($(),P("div",ze,[I(a).keyword?($(),P("p",Be,[Ke,C("span",We,B(I(a).keyword),1),De,C("span",Re,B(I(a).total_count),1),Ue])):ae("",!0),C("ul",Te,[O(I(pe),{loading:I(a).loading,rows:3,count:1,animated:""},{default:L((()=>[($(!0),P(K,null,A(I(a).goodList,(e=>($(),P("li",{onClick:a=>function(e){let a={gid:e.goods_link,unionid:1000360070,positionid:3004143482};ue(a).then((e=>{window.open(e.link,"_blank")}))}(e),class:"remai-item",key:e.goods_id,target:"_blank"},[O(I(ve),{fit:"cover",lazy:"",style:{height:"204px"},class:"hfull wfull",src:e.goods_img},null,8,["src"]),C("div",Xe,[C("p",{class:"title",title:e.short_name||e.jd_title},B(e.short_name),9,Ne),C("p",Ge,[Je,C("em",Qe,B(e.final_price),1),C("a",Ye,"领"+B(e.discount_price)+"元券",1)])])],8,He)))),128))])),_:1},8,["loading"])]),C("div",Me,[ee(O(I(te),{onClick:i[2]||(i[2]=e=>o(1)),loading:I(a).moreLoading,style:{width:"120px"},size:"small"},{default:L((()=>[Ze])),_:1},8,["loading"]),[[le,!I(a).loading]])])])),[[u,t]])])])}}}),[["__scopeId","data-v-19e61494"]]),DDialog:u},setup:(e,a)=>({})},[["render",function(e,a,t,l,o,s){const n=M("content"),i=M("d-dialog");return $(),S(i,{height:"640px",destroyOnClose:!0},{default:L((()=>[O(n)])),_:1})}]]);export{aa as default};
