var e=Object.defineProperty,l=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(l,t,a)=>t in l?e(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a,n=(e,l)=>{for(var t in l||(l={}))o.call(l,t)&&i(e,t,l[t]);if(a)for(var t of a(l))s.call(l,t)&&i(e,t,l[t]);return e},r=(e,a)=>l(e,t(a));import{a4 as c,k as d,Q as p,ay as u,U as m,b1 as f,X as b,A as h,x as y,C as k,aI as v,V as x,a1 as j,D as g,a2 as C,aF as _,bu as V,bx as B,r as w,by as D,aY as T,W as z,aE as I,I as E,f as O,bo as U,bC as P,aB as S,az as $,bL as K,bz as A}from"./todo.9d8ad3e1.js";/* empty css             *//* empty css                   *//* empty css                 */import{a as F,E as q}from"./el-select.adc0af5d.js";import"./el-scrollbar.c921a7f2.js";/* empty css                  *//* empty css                *//* empty css                   *//* empty css                  */import{E as L,a as N}from"./el-checkbox-group.8feecd60.js";import{_ as Q}from"./d-dialog.15134adf.js";import{E as R}from"./index.469ed053.js";import{buttonTypes as W,ElButton as X}from"./index.7243f2d8.js";import{P as Y,E as G,D as H}from"./main.bc43ff04.js";import{b as J,d as M,E as Z,_ as ee,w as le}from"./index.88f3c51b.js";import{u as te,E as ae}from"./index.53173a12.js";import{g as oe,B as se}from"./icon.b571cc89.js";import{u as ie}from"./index.b2ab0f23.js";import{u as ne}from"./index.6fb72867.js";import{ElMessage as re}from"./index.8c1ac3e2.js";import"./index.90c48122.js";import"./style.83568f4e.js";import"./scroll.d4cf4dfc.js";import"./aria.66f3f71c.js";import"./isEqual.060206f9.js";import"./_baseIsEqual.33a0d23b.js";import"./isObject.44842e39.js";import"./debounce.86275fe6.js";import"./index.1a0b45e9.js";import"./validator.bcd39c35.js";import"./index.f979cd8a.js";import"./index.8ef2203f.js";import"./el-dialog.78f7c2e8.js";import"./focus-trap.50913811.js";import"./index.172974c9.js";/* empty css                   */import"./Close.ac61f2f5.js";import"./typescript.72bf8adc.js";import"./event.0bae16b8.js";import"./config-provider.31e0a14a.js";const ce=J({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:W,default:"primary"},cancelButtonType:{type:String,values:W,default:"text"},icon:{type:oe,default:se},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},onConfirm:{type:M(Function)},onCancel:{type:M(Function)},teleported:te.teleported,persistent:te.persistent});const de=le(ee(c(r(n({},{name:"ElPopconfirm"}),{props:ce,setup(e){const l=e,{t:t}=ie(),a=ne("popconfirm"),o=d(),s=()=>{var e,l;null==(l=null==(e=o.value)?void 0:e.onClose)||l.call(e)},i=e=>{var t;null==(t=l.onConfirm)||t.call(l,e),s()},n=e=>{var t;null==(t=l.onCancel)||t.call(l,e),s()},r=p((()=>l.confirmButtonText||t("el.popconfirm.confirmButtonText"))),c=p((()=>l.cancelButtonText||t("el.popconfirm.cancelButtonText")));return(e,l)=>(u(),m(y(ae),{ref_key:"tooltipRef",ref:o,trigger:"click",effect:"light","popper-class":`${y(a).namespace.value}-popover`,teleported:e.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":e.hideAfter,persistent:e.persistent},{content:f((()=>[b("div",{class:h(y(a).b())},[b("div",{class:h(y(a).e("main"))},[!e.hideIcon&&e.icon?(u(),m(y(Z),{key:0,class:h(y(a).e("icon")),style:k({color:e.iconColor})},{default:f((()=>[(u(),m(v(e.icon)))])),_:1},8,["class","style"])):x("v-if",!0),j(" "+g(e.title),1)],2),b("div",{class:h(y(a).e("action"))},[C(y(X),{size:"small",type:"text"===e.cancelButtonType?"":e.cancelButtonType,text:"text"===e.cancelButtonType,onClick:n},{default:f((()=>[j(g(y(c)),1)])),_:1},8,["type","text"]),C(y(X),{size:"small",type:"text"===e.confirmButtonType?"":e.confirmButtonType,text:"text"===e.confirmButtonType,onClick:i},{default:f((()=>[j(g(y(r)),1)])),_:1},8,["type","text"])],2)],2)])),default:f((()=>[e.$slots.reference?_(e.$slots,"reference",{key:0}):x("v-if",!0)])),_:3},8,["popper-class","teleported","hide-after","persistent"]))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/popconfirm/src/popconfirm.vue"]]));const pe=e=>(S("data-v-40f80fb2"),e=e(),$(),e),ue={class:"bookmarks-content wfull hfull"},me={style:{"line-height":"40px"},class:"bookmarks-header bb d-row"},fe=pe((()=>b("li",{class:"pl30 f16 ac d-col-8"},"书签管理",-1))),be={class:"d-col-8",span:8},he={class:"d-col-8",span:8},ye=pe((()=>b("div",{class:"d-inline f12 ml20 mr10"},"导入到",-1))),ke={class:"f12"},ve={class:"d-layout hfull"},xe={class:"d-layout-aside d-auto-y",style:{height:"calc(100% - 40px)",width:"160px"}},je=["onClick"],ge={ref:"refBody",style:{height:"calc(100% - 40px)"},class:"d-layout-content bookmarks-body"},Ce={key:0,class:"ac mt50"},_e=[j(" 书签管理只能在扩展模式下使用 "),pe((()=>b("p",{class:"mt10"},[j(" 进入官网选择适合自己浏览器的版本下载 "),b("a",{href:"https://itap.tsuki.icu",class:"book-item-a",target:"_blank"},"https://itap.tsuki.icu")],-1)))],Ve=j("全选"),Be=j("批量导入"),we={class:"body-item d-flex-y",style:{"justify-content":"space-between"}},De={key:0,class:"d-cell d-flex"},Te=["href"],ze=["src"],Ie={class:"d-elip"},Ee={class:"bookmarks-handle",style:{"min-width":"52px"}},Oe={name:"appBookmarks"};var Ue=V(Object.assign(Oe,{setup(e){const l=B(),t=d(!1),a=d(!1);let o=[];const s=w({activeIndex:0,keyword:"",selectData:[],booksData:[],booksChildren:[]});function i(e){s.selectData=e?o:[],a.value=!1}function c(e){const l=e.length;t.value=l===o.length,a.value=l>0&&l<o.length}function k(){if(s.selectData.length){let e=s.booksChildren.filter((e=>s.selectData.includes(e.id)));if(e.length>50)return void re.warning("最多只能导入50条数据");let l=e.map((e=>({backgroundColor:K(),iconText:e.title.trim().substring(0,2),id:A(),name:e.title,src:"",type:"text",url:e.url})));j.value.children.push(...l),re.success(`批量导入了${l.length}条数据`)}}const v=!(chrome&&chrome.bookmarks),j=p((()=>l.value.find((e=>e.id==D.value))));let _=[];function V(e){e&&!v.value?(s.activeIndex=-1,chrome.bookmarks.search(e,(e=>{s.booksChildren=e||[]}))):(s.activeIndex=0,s.booksChildren=s.booksData[0].children||[])}function S(e){e.edit?chrome.bookmarks.update(e.id,{title:e.title,url:e.url},(l=>{e.edit=!1})):e.edit=!0}function $(e,l){let t=r(n({},l),{children:[]});e.forEach(((e,l)=>{e.url?t.children.push(e):e.children&&$(e.children,e)})),t.children.length&&_.push(t)}return chrome&&chrome.bookmarks&&chrome.bookmarks.getTree((e=>{$(e,{}),s.booksData=_,s.booksData[0]&&(s.booksChildren=s.booksData[0].children||[])})),T((()=>s.booksChildren),(e=>{e.length?(s.selectData=[],t.value=!1,a.value=!1,o=e.map((e=>e.id))):o=[]})),(e,o)=>(u(),m(Q,{height:"600px",destroyOnClose:!0},{default:f((()=>[b("div",ue,[b("ul",me,[fe,b("li",be,[C(y(R),{style:{width:"200px"},placeholder:"搜索",onInput:V,size:"small",modelValue:s.keyword,"onUpdate:modelValue":o[0]||(o[0]=e=>s.keyword=e)},null,8,["modelValue"])]),b("li",he,[ye,C(y(q),{modelValue:y(D),"onUpdate:modelValue":o[1]||(o[1]=e=>O(D)?D.value=e:null),style:{width:"100px"},size:"small",placeholder:"group"},{default:f((()=>[(u(!0),z(E,null,I(y(l),(e=>(u(),m(y(F),{key:e.id,label:e.name,value:e.id},{default:f((()=>[b("span",ke,g(e.name),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),b("div",ve,[b("ul",xe,[(u(!0),z(E,null,I(s.booksData,((e,l)=>(u(),z("li",{onClick:t=>function(e,l){s.activeIndex=l,s.booksChildren=e.children||[]}(e,l),class:h([{active:s.activeIndex==l},"d-left-tabs-item"]),key:l},g(e.title),11,je)))),128))]),b("ul",ge,[v?(u(),z("div",Ce,_e)):x("",!0),b("div",null,[C(y(L),{modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=e=>t.value=e),indeterminate:a.value,onChange:i},{default:f((()=>[Ve])),_:1},8,["modelValue","indeterminate"]),C(y(X),{class:"fr",disabled:!s.selectData.length,size:"small",type:"primary",onClick:k},{default:f((()=>[Be])),_:1},8,["disabled"])]),C(y(N),{modelValue:s.selectData,"onUpdate:modelValue":o[3]||(o[3]=e=>s.selectData=e),onChange:c},{default:f((()=>[(u(!0),z(E,null,I(s.booksChildren,((e,l)=>(u(),z("div",{class:"body-card","body-style":{padding:"10px"},key:e.id},[(u(),m(y(L),{key:e.id,label:e.id},{default:f((()=>[b("div",we,[e.edit?(u(),z("p",De,[C(y(R),{src:`chrome://favicon/size/32@2x/${e.url}`,class:"d-cell",onKeyup:U((l=>S(e)),["enter"]),size:"small",placeholder:"标题",modelValue:e.title,"onUpdate:modelValue":l=>e.title=l},null,8,["src","onKeyup","modelValue","onUpdate:modelValue"]),C(y(R),{placeholder:"url",class:"d-cell ml5",onKeyup:U((l=>S(e)),["enter"]),size:"small",modelValue:e.url,"onUpdate:modelValue":l=>e.url=l},null,8,["onKeyup","modelValue","onUpdate:modelValue"])])):(u(),z("a",{key:1,href:e.url,target:"_blank",class:"d-flex-y d-hidden"},[b("img",{src:`chrome://favicon/size/32@2x/${e.url}`,class:"mr10"},null,8,ze),b("span",Ie,g(e.title),1)],8,Te)),b("p",Ee,[C(y(X),{type:"warning",onClick:l=>function(e){let l={backgroundColor:K(),iconText:e.title.trim().substring(0,4),id:A(),name:e.title,src:"",type:"text",url:e.url};j.value.children.push(l),re.success(`导入【${l.name}】成功`)}(e),size:"small",icon:y(Y)},null,8,["onClick","icon"]),C(y(X),{onClick:l=>S(e),size:"small",type:"primary",icon:e.edit?y(P):y(G)},null,8,["onClick","icon"]),C(y(de),{onConfirm:t=>function(e,l){chrome.bookmarks.remove(e.id,(()=>{s.booksChildren.splice(l,1)}))}(e,l),title:"确认删除?"},{reference:f((()=>[C(y(X),{size:"small",type:"danger",icon:y(H)},null,8,["icon"])])),_:2},1032,["onConfirm"])])])])),_:2},1032,["label"]))])))),128))])),_:1},8,["modelValue"])],512)])])])),_:1}))}}),[["__scopeId","data-v-40f80fb2"]]);export{Ue as default};
