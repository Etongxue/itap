import{bu as e,bG as t,k as a,r as s,br as o,bE as i,aG as l,ay as n,U as c,b1 as r,X as d,W as m,aE as f,A as p,I as u,x as b,b7 as v,D as j,a2 as x,b3 as y,bn as g,V as w,a1 as h,bS as k,bt as I,bz as _}from"./todo.9d8ad3e1.js";import{_ as B}from"./d-dialog.15134adf.js";import{D as C}from"./d-empty.fe452060.js";/* empty css             *//* empty css                 *//* empty css                       *//* empty css                  *//* empty css                   */import{SAVE_CONFIG as V}from"./save_config.acf4dfbd.js";import{a as E}from"./timeFormat.ead8e02a.js";import{r as M,P as Y}from"./main.bc43ff04.js";import{_ as z}from"./PinOff16Regular.23540ca8.js";import{o as H}from"./orderBy.6247b301.js";import{c as L}from"./cloneDeep.d4cf7686.js";import{d as N}from"./debounce.86275fe6.js";import{E as O}from"./index.469ed053.js";import{E as D}from"./index.20caaeba.js";import"./el-dialog.78f7c2e8.js";import"./index.88f3c51b.js";import"./style.83568f4e.js";import"./index.6fb72867.js";import"./isObject.44842e39.js";import"./icon.b571cc89.js";import"./index.b2ab0f23.js";import"./focus-trap.50913811.js";import"./aria.66f3f71c.js";import"./index.172974c9.js";import"./index.8ef2203f.js";import"./scroll.d4cf4dfc.js";import"./Close.ac61f2f5.js";import"./public-api.2bc03c02.js";import"./index.cf2b56e1.js";import"./index.becf6c0c.js";import"./baseRequest.acdd10d1.js";/* empty css                   */import"./index.8c1ac3e2.js";import"./config-provider.31e0a14a.js";import"./index.90c48122.js";import"./typescript.72bf8adc.js";import"./website.ab9ea580.js";import"./index.1756df45.js";/* empty css                */import"./Loading.a57c2d0d.js";import"./_baseOrderBy.0a62979c.js";import"./_baseIsEqual.33a0d23b.js";import"./identity.737b3aaf.js";import"./_baseClone.48fb5fa9.js";import"./index.f979cd8a.js";import"./index.7243f2d8.js";import"./event.0bae16b8.js";import"./validator.bcd39c35.js";var P={};Object.defineProperty(P,"__esModule",{value:!0});const A=M,R={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},q=[(0,A.createElementVNode)("g",{fill:"none"},[(0,A.createElementVNode)("path",{d:"M10.059 2.445a1.5 1.5 0 0 0-2.386.354l-2.02 3.79l-2.811.937a.5.5 0 0 0-.196.828L4.793 10.5l-2.647 2.647L2 14l.854-.146L5.5 11.207l2.146 2.147a.5.5 0 0 0 .828-.196l.937-2.81l3.779-2.024a1.5 1.5 0 0 0 .354-2.38L10.06 2.444zm-1.504.824a.5.5 0 0 1 .796-.118l3.485 3.498a.5.5 0 0 1-.118.794L8.764 9.559a.5.5 0 0 0-.238.283l-.744 2.233l-3.856-3.856l2.232-.744a.5.5 0 0 0 .283-.24L8.555 3.27z",fill:"currentColor"})],-1)];var S=P.default=(0,A.defineComponent)({name:"Pin16Regular",render:function(e,t){return(0,A.openBlock)(),(0,A.createElementBlock)("svg",R,q)}}),U={};Object.defineProperty(U,"__esModule",{value:!0});const F=M,G={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},T=[(0,F.createElementVNode)("g",{fill:"none"},[(0,F.createElementVNode)("path",{d:"M6.5 7v4a.5.5 0 0 0 1 0V7a.5.5 0 0 0-1 0zM9 6.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V7a.5.5 0 0 1 .5-.5zM10 4h3a.5.5 0 0 1 0 1h-.553l-.752 6.776A2.5 2.5 0 0 1 9.21 14H6.79a2.5 2.5 0 0 1-2.485-2.224L3.552 5H3a.5.5 0 0 1 0-1h3a2 2 0 1 1 4 0zM8 3a1 1 0 0 0-1 1h2a1 1 0 0 0-1-1zM4.559 5l.74 6.666A1.5 1.5 0 0 0 6.79 13h2.42a1.5 1.5 0 0 0 1.49-1.334L11.442 5H4.56z",fill:"currentColor"})],-1)];var W=U.default=(0,F.defineComponent)({name:"Delete16Regular",render:function(e,t){return(0,F.openBlock)(),(0,F.createElementBlock)("svg",G,T)}});const X={class:"d-layout app-notes hfull"},J={class:"d-layout-aside notes-tabs",width:"200px",style:{"background-color":"var(--bg-input)"}},K={class:"f18 bb pl20"},Q=h(" 备忘录 "),Z={class:"d-relative notes-sort fr pr10"},$=["onClick"],ee={class:"f14 b d-elip"},te={class:"f12 d-inline d-sub"},ae=["onClick"],se=["title","onClick"],oe={class:"d-layout-content hfull p10 d-bg-input"},ie={key:0,class:"hfull"},le={class:"ac f12 d-sub mt5"},ne={name:"appNotes"};var ce=e(Object.assign(ne,{setup(e){var h;const M=t(),P=a(null),A=s({activeItem:M.value[0],activeId:null==(h=M.value[0])?void 0:h.id,sortBy:o.get("noteSortBy")||"desc",sortNotes:[]});let R=[];async function q(e){var t;R=await i.get("notes"),R||(R=M._rawValue,await i.set("notes",R));let a=H(R,["ut"],[A.sortBy]),s=L(a.slice(0,3));s.forEach((e=>{e.content&&(e.content=e.content.slice(0,40))})),M.value=s,A.sortNotes=a,"del"==e&&(A.activeId=null==(t=a[0])?void 0:t.id);let o=A.sortNotes.find((e=>e.id==A.activeId))||{};A.activeItem=o}function U(){V("notes")}q();const F=()=>{"desc"==A.sortBy?A.sortBy="asc":A.sortBy="desc",o.set("noteSortBy",A.sortBy),q()};const G=N((async()=>{await i.set("notes",R),q()}),1e3),T=async()=>{A.activeItem.ut=I().valueOf(),G(),U()};async function ne(){let e={id:_(),title:"",content:"",fixed:!1,ct:I().valueOf(),ut:I().valueOf()};A.activeId=e.id,R.push(e),await i.set("notes",R),q(),requestAnimationFrame((()=>{P.value.focus()})),U()}return(e,t)=>{const a=l("el-icon");return n(),c(B,null,{default:r((()=>[d("div",X,[d("div",J,[d("h2",K,[Q,d("span",Z,[(n(),m(u,null,f(["asc","desc"],((e,t)=>d("i",{key:t,class:p([[{active:A.sortBy==e},e],"sort-caret"]),onClick:F},null,2))),64))])]),b(M).length?(n(),c(v,{key:1,tag:"ul",name:"list-complete",class:"notes-tabs-body"},{default:r((()=>[(n(!0),m(u,null,f(A.sortNotes,((e,t)=>(n(),m("li",{onClick:t=>(A.activeItem=e,A.activeId=e.id),class:p([{active:A.activeId===e.id},"notes-tabs-item d-elip"]),key:e.id},[d("h4",ee,j(e.title||e.content||"无标题"),1),d("time",te,j(b(E)(e.ut,"YYYY/M/D HH:mm")),1),d("span",{class:"notes-del",title:"删除备忘录",onClick:t=>function(e,t){D.confirm("删除这条备忘录?","提示",{center:!0,type:"warning"}).then((async()=>{let t=R.findIndex((t=>t.id==e.id));R.splice(t,1),await i.set("notes",R),await q("del"),U()}))}(e)},[x(a,{size:18},{default:r((()=>[x(b(W))])),_:1})],8,ae),d("span",{class:"notes-del fixed",title:""+(e.fixed?"取消固定":"固定到桌面"),onClick:t=>async function(e){if(e.fixed=!e.fixed,await i.set("notes",R),e.fixed)k.value.push(e);else{let t=k.value.findIndex((t=>t.id==e.id));k.value.splice(t,1)}U()}(e)},[x(a,{size:18},{default:r((()=>[y(x(b(S),null,null,512),[[g,!e.fixed]]),y(x(b(z),null,null,512),[[g,e.fixed]])])),_:2},1024)],8,se)],10,$)))),128))])),_:1})):(n(),c(C,{key:0})),d("div",{class:"notes-add d-flex-center",onClick:ne,title:"新增备忘录"},[x(a,null,{default:r((()=>[x(b(Y))])),_:1})])]),d("div",oe,[b(M).length?(n(),m("div",ie,[x(b(O),{ref_key:"refTitle",ref:P,class:"note-title",modelValue:A.activeItem.title,"onUpdate:modelValue":t[0]||(t[0]=e=>A.activeItem.title=e),onInput:T,placeholder:"请输入笔记标题"},null,8,["modelValue"]),x(b(O),{onInput:T,class:"note-content",type:"textarea",modelValue:A.activeItem.content,"onUpdate:modelValue":t[1]||(t[1]=e=>A.activeItem.content=e),placeholder:"请输入笔记内容"},null,8,["modelValue"]),d("div",le," 最后编辑："+j(b(E)(A.activeItem.ut,"YYYY-M-D HH:mm:ss"))+", 创建："+j(b(E)(A.activeItem.ct,"YYYY-MM-DD HH:mm:ss")),1)])):w("",!0)])])])),_:1})}}}),[["__scopeId","data-v-0d93eec6"]]);export{ce as default};
