import{c0 as e,k as a,bq as t,r as i,al as o,br as s,bs as r,aw as p,ay as n,U as l}from"./todo.9d8ad3e1.js";import m from"./d-contextmenu.48628903.js";import{u as c,o as f,$ as d,a as j,e as u,c as b}from"./main.bc43ff04.js";import{d as _}from"./index.9334a195.js";import{g as w}from"./globalSearch.795b0af1.js";import{c as h}from"./create_login.8330b0f6.js";import{i as g}from"./wallpaperDb.b6716285.js";import"./Search.ae535b15.js";/* empty css             *//* empty css                  */import"./el-dialog.78f7c2e8.js";import"./index.88f3c51b.js";import"./style.83568f4e.js";import"./index.6fb72867.js";import"./isObject.44842e39.js";import"./icon.b571cc89.js";import"./index.b2ab0f23.js";import"./focus-trap.50913811.js";import"./aria.66f3f71c.js";import"./index.172974c9.js";import"./index.8ef2203f.js";import"./scroll.d4cf4dfc.js";/* empty css                   *//* empty css                 */import"./el-form-item.a30a099f.js";import"./index.90c48122.js";import"./_baseClone.48fb5fa9.js";import"./_baseIsEqual.33a0d23b.js";import"./isEqual.060206f9.js";import"./el-radio.fafbbf94.js";import"./index.469ed053.js";import"./typescript.72bf8adc.js";import"./index.f979cd8a.js";import"./index.cf2b56e1.js";import"./index.becf6c0c.js";import"./baseRequest.acdd10d1.js";/* empty css                   */import"./index.8c1ac3e2.js";import"./config-provider.31e0a14a.js";import"./public-api.2bc03c02.js";import"./website.ab9ea580.js";import"./index.1756df45.js";/* empty css                */import"./Loading.a57c2d0d.js";import"./Close.ac61f2f5.js";import"./save_config.acf4dfbd.js";import"./debounce.86275fe6.js";import"./index.7243f2d8.js";import"./el-image-viewer.373c54a1.js";import"./throttle.8deae385.js";import"./position.c5cd7449.js";import"./Refresh.84dfc6ef.js";const x={__name:"HomeContextmenu",setup(x){var y=e.createInstance({name:"wallpaper"});const v=a(null),k=t(),{t:E}=c(),I=i({contextmenuData:[{name:E("addIcon"),key:"add",icon:"plus"},{name:E("changeWallpaper"),key:"switchWallpaper",icon:"switch"},{name:E("downWallpaper"),key:"download",icon:"download",group:!0},{name:E("setting"),key:"setting",icon:"setting"},{name:"立即备份",key:"backups",icon:"cloudy"},{name:"本地搜索",key:"search",icon:"search"}]});o((()=>{f(d("#app-main"),"contextmenu",A)}));let C=k.value.wallpaper.time;if(C){let e=s.get("wallpaperSwitchTime"),a=(new Date).getTime();e+=36e5*C,e<a&&(D(),s.set("wallpaperSwitchTime",a))}async function D(){try{let e=await g.keys();e=e.filter((e=>e.includes("bing_")||e.includes("unsplash_")||e.includes("wallpaper_")));let a=e[Math.floor(Math.random()*e.length)],t=await y.getItem(a);t=t.data||[];let i=t[Math.floor(Math.random()*t.length)];k.value.wallpaper.src=i.raw,k.value.wallpaper.thumb=i.thumb,k.value.wallpaper.type=1,r((()=>import("./save_config.acf4dfbd.js")),["assets/save_config.acf4dfbd.js","assets/base.bb320680.css","assets/el-message.eaf5942b.css","assets/el-icon.872f173f.css","assets/public-api.2bc03c02.js","assets/todo.9d8ad3e1.js","assets/todo.a2cec06c.css","assets/index.cf2b56e1.js","assets/index.becf6c0c.js","assets/baseRequest.acdd10d1.js","assets/index.8c1ac3e2.js","assets/config-provider.31e0a14a.js","assets/index.88f3c51b.js","assets/style.83568f4e.js","assets/index.6fb72867.js","assets/isObject.44842e39.js","assets/index.90c48122.js","assets/typescript.72bf8adc.js","assets/icon.b571cc89.js","assets/aria.66f3f71c.js","assets/index.172974c9.js","assets/website.ab9ea580.js","assets/index.1756df45.js","assets/index.f30bdde8.css","assets/Loading.a57c2d0d.js","assets/Close.ac61f2f5.js","assets/debounce.86275fe6.js"]).then((e=>{e.SAVE_CONFIG("baseConfig")}))}catch(e){r((()=>import("./wallpaper.a3a8e977.js")),["assets/wallpaper.a3a8e977.js","assets/baseRequest.acdd10d1.js","assets/todo.9d8ad3e1.js","assets/todo.a2cec06c.css","assets/index.becf6c0c.js"]).then((e=>{e.randomWallpaperApi().then((e=>{let a=e.data||"";k.value.wallpaper.src=a,k.value.wallpaper.thumb="",k.value.wallpaper.type=1,r((()=>import("./save_config.acf4dfbd.js")),["assets/save_config.acf4dfbd.js","assets/base.bb320680.css","assets/el-message.eaf5942b.css","assets/el-icon.872f173f.css","assets/public-api.2bc03c02.js","assets/todo.9d8ad3e1.js","assets/todo.a2cec06c.css","assets/index.cf2b56e1.js","assets/index.becf6c0c.js","assets/baseRequest.acdd10d1.js","assets/index.8c1ac3e2.js","assets/config-provider.31e0a14a.js","assets/index.88f3c51b.js","assets/style.83568f4e.js","assets/index.6fb72867.js","assets/isObject.44842e39.js","assets/index.90c48122.js","assets/typescript.72bf8adc.js","assets/icon.b571cc89.js","assets/aria.66f3f71c.js","assets/index.172974c9.js","assets/website.ab9ea580.js","assets/index.1756df45.js","assets/index.f30bdde8.css","assets/Loading.a57c2d0d.js","assets/Close.ac61f2f5.js","assets/debounce.86275fe6.js"]).then((e=>{e.SAVE_CONFIG("baseConfig")}))}))}))}}function A(e){e.preventDefault(),e.stopPropagation(),v.value.open(e)}function O(e){if("add"==e.key)u();else if("switchWallpaper"==e.key)D();else if("download"==e.key){let e=k.value.wallpaper;if(!e.src)return;_(e.src,e.name)}else if("setting"==e.key)b.visible=!0,b.active=2;else if("backups"==e.key){if(!s.get("token"))return void h("login");r((()=>import("./save_config.acf4dfbd.js")),["assets/save_config.acf4dfbd.js","assets/base.bb320680.css","assets/el-message.eaf5942b.css","assets/el-icon.872f173f.css","assets/public-api.2bc03c02.js","assets/todo.9d8ad3e1.js","assets/todo.a2cec06c.css","assets/index.cf2b56e1.js","assets/index.becf6c0c.js","assets/baseRequest.acdd10d1.js","assets/index.8c1ac3e2.js","assets/config-provider.31e0a14a.js","assets/index.88f3c51b.js","assets/style.83568f4e.js","assets/index.6fb72867.js","assets/isObject.44842e39.js","assets/index.90c48122.js","assets/typescript.72bf8adc.js","assets/icon.b571cc89.js","assets/aria.66f3f71c.js","assets/index.172974c9.js","assets/website.ab9ea580.js","assets/index.1756df45.js","assets/index.f30bdde8.css","assets/Loading.a57c2d0d.js","assets/Close.ac61f2f5.js","assets/debounce.86275fe6.js"]).then((e=>{e.SAVE_CONFIG(null,100,"manua")}))}else"search"==e.key&&(w.value=!0)}return p((()=>{j(d("#app-main"),"contextmenu",A)})),(e,a)=>(n(),l(m,{uid:"home_5dwx",data:I.contextmenuData,onClick:O,ref_key:"refContextmenu",ref:v},null,8,["data"]))}};export{x as default};
