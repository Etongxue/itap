var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,r=(e,a)=>{for(var t in a||(a={}))n.call(a,t)&&o(e,t,a[t]);if(l)for(var t of l(a))s.call(a,t)&&o(e,t,a[t]);return e},i=(e,l)=>a(e,t(l));import{a4 as c,bs as u,ay as v,W as d,X as f,bW as p,bu as m,bv as b,m as w,by as g,bz as y,bX as h,k,a as z,Q as x,bG as O,aY as C,al as I,as as _,U as A,a2 as L,b1 as T,A as S,x as V,bp as B,V as j,bJ as E,bP as M,I as N,aI as P,aE as Y,b3 as $,bn as D,C as R,aF as X,b6 as F,T as H,bB as W,c3 as G,c1 as Z,bF as q,aS as J,D as K,ak as Q,c4 as U,bH as ee,bT as ae,dV as te,dW as le}from"./save_config.7e387697.js";import{m as ne,u as se}from"./el-input.07836306.js";import{A as oe,B as re,T as ie}from"./main.5f87c81f.js";import{z as ce}from"./zoom-in.275d1c48.js";const ue=c({name:"FullScreen"}),ve={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},de=[f("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1)];var fe=u(ue,[["render",function(e,a,t,l,n,s){return v(),d("svg",ve,de)}]]);const pe=c({name:"RefreshLeft"}),me={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},be=[f("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"},null,-1)];var we=u(pe,[["render",function(e,a,t,l,n,s){return v(),d("svg",me,be)}]]);const ge=c({name:"RefreshRight"}),ye={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},he=[f("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"},null,-1)];var ke=u(ge,[["render",function(e,a,t,l,n,s){return v(),d("svg",ye,he)}]]);const ze=c({name:"ScaleToOriginal"}),xe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Oe=[f("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zM512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412zM512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512z"},null,-1)];var Ce=u(ze,[["render",function(e,a,t,l,n,s){return v(),d("svg",xe,Oe)}]]);const Ie=c({name:"ZoomOut"}),_e={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ae=[f("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zM352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64z"},null,-1)];var Le=u(Ie,[["render",function(e,a,t,l,n,s){return v(),d("svg",_e,Ae)}]]);const Te=m({urlList:{type:b(Array),default:()=>ne([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0}}),Se=["src"];const Ve=q(W(c(i(r({},{name:"ElImageViewer"}),{props:Te,emits:{close:()=>!0,switch:e=>"number"==typeof e},setup(e,{emit:a}){const t=e,l={CONTAIN:{name:"contain",icon:w(fe)},ORIGINAL:{name:"original",icon:w(Ce)}},n=p&&/firefox/i.test(window.navigator.userAgent)?"DOMMouseScroll":"mousewheel",{t:s}=g(),o=y("image-viewer"),{nextZIndex:c}=h(),u=k(),m=k([]),b=z(),W=k(!0),q=k(t.initialIndex),J=k(l.CONTAIN),K=k({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),Q=x((()=>{const{urlList:e}=t;return e.length<=1})),U=x((()=>0===q.value)),ee=x((()=>q.value===t.urlList.length-1)),ae=x((()=>t.urlList[q.value])),te=x((()=>{const{scale:e,deg:a,offsetX:t,offsetY:n,enableTransition:s}=K.value;let o=t/e,r=n/e;switch(a%360){case 90:case-270:[o,r]=[r,-o];break;case 180:case-180:[o,r]=[-o,-r];break;case 270:case-90:[o,r]=[-r,o]}const i={transform:`scale(${e}) rotate(${a}deg) translate(${o}px, ${r}px)`,transition:s?"transform .3s":""};return J.value.name===l.CONTAIN.name&&(i.maxWidth=i.maxHeight="100%"),i})),le=x((()=>O(t.zIndex)?t.zIndex:c()));function ne(){b.stop(),a("close")}function se(){W.value=!1}function ue(e){W.value=!1,e.target.alt=s("el.image.error")}function ve(e){if(W.value||0!==e.button||!u.value)return;K.value.enableTransition=!1;const{offsetX:a,offsetY:t}=K.value,l=e.pageX,n=e.pageY,s=ie((e=>{K.value=i(r({},K.value),{offsetX:a+e.pageX-l,offsetY:t+e.pageY-n})})),o=Z(document,"mousemove",s);Z(document,"mouseup",(()=>{o()})),e.preventDefault()}function de(){K.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function pe(){if(W.value)return;const e=Object.keys(l),a=Object.values(l),t=J.value.name,n=(a.findIndex((e=>e.name===t))+1)%e.length;J.value=l[e[n]],de()}function me(){if(U.value&&!t.infinite)return;const e=t.urlList.length;q.value=(q.value-1+e)%e}function be(){if(ee.value&&!t.infinite)return;const e=t.urlList.length;q.value=(q.value+1)%e}function ge(e,a={}){if(W.value)return;const{zoomRate:t,rotateDeg:l,enableTransition:n}=r({zoomRate:1.4,rotateDeg:90,enableTransition:!0},a);switch(e){case"zoomOut":K.value.scale>.2&&(K.value.scale=Number.parseFloat((K.value.scale/t).toFixed(3)));break;case"zoomIn":K.value.scale<7&&(K.value.scale=Number.parseFloat((K.value.scale*t).toFixed(3)));break;case"clockwise":K.value.deg+=l;break;case"anticlockwise":K.value.deg-=l}K.value.enableTransition=n}return C(ae,(()=>{I((()=>{const e=m.value[0];(null==e?void 0:e.complete)||(W.value=!0)}))})),C(q,(e=>{de(),a("switch",e)})),_((()=>{var e,a;!function(){const e=ie((e=>{switch(e.code){case G.esc:t.closeOnPressEscape&&ne();break;case G.space:pe();break;case G.left:me();break;case G.up:ge("zoomIn");break;case G.right:be();break;case G.down:ge("zoomOut")}})),a=ie((e=>{ge((e.wheelDelta?e.wheelDelta:-e.detail)>0?"zoomIn":"zoomOut",{zoomRate:1.2,enableTransition:!1})}));b.run((()=>{Z(document,"keydown",e),Z(document,n,a)}))}(),null==(a=null==(e=u.value)?void 0:e.focus)||a.call(e)})),(e,a)=>(v(),A(H,{to:"body",disabled:!e.teleported},[L(F,{name:"viewer-fade",appear:""},{default:T((()=>[f("div",{ref_key:"wrapper",ref:u,tabindex:-1,class:S(V(o).e("wrapper")),style:R({zIndex:V(le)})},[f("div",{class:S(V(o).e("mask")),onClick:a[0]||(a[0]=B((a=>e.hideOnClickModal&&ne()),["self"]))},null,2),j(" CLOSE "),f("span",{class:S([V(o).e("btn"),V(o).e("close")]),onClick:ne},[L(V(E),null,{default:T((()=>[L(V(M))])),_:1})],2),j(" ARROW "),V(Q)?j("v-if",!0):(v(),d(N,{key:0},[f("span",{class:S([V(o).e("btn"),V(o).e("prev"),V(o).is("disabled",!e.infinite&&V(U))]),onClick:me},[L(V(E),null,{default:T((()=>[L(V(oe))])),_:1})],2),f("span",{class:S([V(o).e("btn"),V(o).e("next"),V(o).is("disabled",!e.infinite&&V(ee))]),onClick:be},[L(V(E),null,{default:T((()=>[L(V(re))])),_:1})],2)],64)),j(" ACTIONS "),f("div",{class:S([V(o).e("btn"),V(o).e("actions")])},[f("div",{class:S(V(o).e("actions__inner"))},[L(V(E),{onClick:a[1]||(a[1]=e=>ge("zoomOut"))},{default:T((()=>[L(V(Le))])),_:1}),L(V(E),{onClick:a[2]||(a[2]=e=>ge("zoomIn"))},{default:T((()=>[L(V(ce))])),_:1}),f("i",{class:S(V(o).e("actions__divider"))},null,2),L(V(E),{onClick:pe},{default:T((()=>[(v(),A(P(J.value.icon)))])),_:1}),f("i",{class:S(V(o).e("actions__divider"))},null,2),L(V(E),{onClick:a[3]||(a[3]=e=>ge("anticlockwise"))},{default:T((()=>[L(V(we))])),_:1}),L(V(E),{onClick:a[4]||(a[4]=e=>ge("clockwise"))},{default:T((()=>[L(V(ke))])),_:1})],2)],2),j(" CANVAS "),f("div",{class:S(V(o).e("canvas"))},[(v(!0),d(N,null,Y(e.urlList,((e,a)=>$((v(),d("img",{ref_for:!0,ref:e=>m.value[a]=e,key:e,src:e,style:R(V(te)),class:S(V(o).e("img")),onLoad:se,onError:ue,onMousedown:ve},null,46,Se)),[[D,a===q.value]]))),128))],2),X(e.$slots,"default")],6)])),_:3})],8,["disabled"]))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]])),Be=m({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},lazy:{type:Boolean,default:!1},scrollContainer:{type:b([String,Object])},previewSrcList:{type:b(Array),default:()=>ne([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0}}),je={error:e=>e instanceof Event,switch:e=>O(e),close:()=>!0},Ee=["src"],Me={key:0};const Ne=q(W(c(i(r({},{name:"ElImage",inheritAttrs:!1}),{props:Be,emits:je,setup(e,{emit:a}){const t=e;let l="";const{t:n}=g(),s=y("image"),o=J(),r=se(),i=k(!1),c=k(!0),u=k(0),m=k(0),b=k(!1),w=k(),h=k();let z,O;const L=x((()=>o.style)),B=x((()=>{const{fit:e}=t;return p&&e?{objectFit:e}:{}})),E=x((()=>{const{previewSrcList:e}=t;return Array.isArray(e)&&e.length>0})),M=x((()=>{const{previewSrcList:e,initialIndex:a}=t;let l=a;return a>e.length-1&&(l=0),l})),P=()=>{if(!p)return;c.value=!0,i.value=!1;const e=new Image,l=t.src;e.addEventListener("load",(a=>{l===t.src&&function(e,a){u.value=a.width,m.value=a.height,c.value=!1,i.value=!1}(0,e)})),e.addEventListener("error",(e=>{var n;l===t.src&&(n=e,c.value=!1,i.value=!0,a("error",n))})),Object.entries(o).forEach((([a,t])=>{"onload"!==a.toLowerCase()&&e.setAttribute(a,t)})),e.src=l};function Y(){te(w.value,h.value)&&(P(),F())}const $=le(Y,200);async function D(){var e;if(!p)return;await I();const{scrollContainer:a}=t;U(a)?h.value=a:ee(a)&&""!==a?h.value=null!=(e=document.querySelector(a))?e:void 0:w.value&&(h.value=ae(w.value)),h.value&&(z=Z(h,"scroll",$),setTimeout((()=>Y()),100))}function F(){p&&h.value&&$&&(z(),h.value=void 0)}function H(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function W(){E.value&&(O=Z("wheel",H,{passive:!1}),l=document.body.style.overflow,document.body.style.overflow="hidden",b.value=!0)}function G(){null==O||O(),document.body.style.overflow=l,b.value=!1,a("close")}function q(e){a("switch",e)}return C((()=>t.src),(()=>{t.lazy?(c.value=!0,i.value=!1,F(),D()):P()})),_((()=>{t.lazy?D():P()})),(e,a)=>(v(),d("div",{ref_key:"container",ref:w,class:S([V(s).b(),e.$attrs.class]),style:R(V(L))},[c.value?X(e.$slots,"placeholder",{key:0},(()=>[f("div",{class:S(V(s).e("placeholder"))},null,2)])):i.value?X(e.$slots,"error",{key:1},(()=>[f("div",{class:S(V(s).e("error"))},K(V(n)("el.image.error")),3)])):(v(),d("img",Q({key:2},V(r),{src:e.src,style:V(B),class:[V(s).e("inner"),V(E)?V(s).e("preview"):""],onClick:W}),null,16,Ee)),V(E)?(v(),d(N,{key:3},[b.value?(v(),A(V(Ve),{key:0,"z-index":e.zIndex,"initial-index":V(M),infinite:e.infinite,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:G,onSwitch:q},{default:T((()=>[e.$slots.viewer?(v(),d("div",Me,[X(e.$slots,"viewer")])):j("v-if",!0)])),_:3},8,["z-index","initial-index","infinite","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):j("v-if",!0)],2112)):j("v-if",!0)],6))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]));export{Ne as E};
