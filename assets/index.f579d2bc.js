var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,r=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&o(e,t,a[t]);if(l)for(var t of l(a))i.call(a,t)&&o(e,t,a[t]);return e},n=(e,l)=>a(e,t(l));import{a4 as c,ay as d,U as p,a2 as m,W as u,X as f,k as h,r as w,Q as v,aG as b,aH as y,b1 as x,b3 as g,D as j,x as _,I as k,aE as M,a1 as O,V as z,bt as D,C}from"./todo.9d8ad3e1.js";import{_ as S}from"./d-dialog.15134adf.js";/* empty css             *//* empty css                 */import{a as I,E as V}from"./el-select.adc0af5d.js";import"./el-scrollbar.c921a7f2.js";/* empty css                  */import{a as T}from"./timeFormat.ead8e02a.js";import{g as q,a as A,b as H}from"./weather.29b6f4c6.js";import{A as W,B}from"./main.bc43ff04.js";import{u as E,U as P,i as L,a as $,b as F}from"./install.4ea7e57f.js";import"./el-dialog.78f7c2e8.js";import"./index.88f3c51b.js";import"./style.83568f4e.js";import"./index.6fb72867.js";import"./isObject.44842e39.js";import"./icon.b571cc89.js";import"./index.b2ab0f23.js";import"./focus-trap.50913811.js";import"./aria.66f3f71c.js";import"./index.172974c9.js";import"./index.8ef2203f.js";import"./scroll.d4cf4dfc.js";/* empty css                   */import"./Close.ac61f2f5.js";import"./index.469ed053.js";import"./index.90c48122.js";import"./typescript.72bf8adc.js";import"./index.f979cd8a.js";import"./index.53173a12.js";import"./event.0bae16b8.js";import"./isEqual.060206f9.js";import"./_baseIsEqual.33a0d23b.js";import"./debounce.86275fe6.js";import"./index.1a0b45e9.js";import"./validator.bcd39c35.js";import"./index.becf6c0c.js";import"./baseRequest.acdd10d1.js";import"./baseApi.a9e27478.js";var G=c({name:"Aim"});const U={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Q=m("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),R=m("path",{fill:"currentColor",d:"M512 96a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V128a32 32 0 0 1 32-32zm0 576a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V704a32 32 0 0 1 32-32zM96 512a32 32 0 0 1 32-32h192a32 32 0 0 1 0 64H128a32 32 0 0 1-32-32zm576 0a32 32 0 0 1 32-32h192a32 32 0 1 1 0 64H704a32 32 0 0 1-32-32z"},null,-1);G.render=function(e,a,t,l,s,i){return d(),p("svg",U,[Q,R])},G.__file="packages/components/Aim.vue";var X=G;const Y={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},J=[f("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[f("path",{d:"M5 21c.5-4.5 2.5-8 7-10"}),f("path",{d:"M9 18c6.218 0 10.5-3.288 11-12V4h-4.014c-9 0-11.986 4-12 9c0 1 0 3 2 5h3z"})],-1)];var K=c({name:"Leaf",render:function(e,a){return d(),u("svg",Y,J)}});const N={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Z=[f("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[f("path",{d:"M3 17h1m16 0h1M5.6 10.6l.7.7m12.1-.7l-.7.7M8 17a4 4 0 0 1 8 0"}),f("path",{d:"M3 21h18"}),f("path",{d:"M12 9V3l3 3M9 6l3-3"})],-1)];var ee=c({name:"Sunrise",render:function(e,a){return d(),u("svg",N,Z)}});const ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},te=[f("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[f("path",{d:"M3 17h1m16 0h1M5.6 10.6l.7.7m12.1-.7l-.7.7M8 17a4 4 0 0 1 8 0"}),f("path",{d:"M3 21h18"}),f("path",{d:"M12 3v6l3-3M9 6l3 3"})],-1)];var le=c({name:"Sunset",render:function(e,a){return d(),u("svg",ae,te)}});const se={class:"app-weather-body d-scrollbar-hide"},ie={class:"d-flex-between"},oe={class:"f12"},re={class:"ml5"},ne={class:"ml5"},ce={class:"f12 ml20"},de={class:"d-flex-y app-weather-select"},pe={class:"d-flex-y mt20 mb20"},me={class:"weather-now-tmp"},ue={class:"ml20"},fe={key:0,class:"weather-aqi"},he={class:"mt10 d-flex-y"},we=["src"],ve={class:"mr10"},be={class:"mr10"},ye={class:"mr10"},xe={key:0,class:"f13"},ge={class:"mt10 mb10 f13 d-flex",style:{"line-height":"18px",height:"16px"}},je={class:"mr20"},_e={class:"mr20"},ke={class:"mr20"},Me={class:"mr20"},Oe={class:"mr20"},ze={class:"weather-card-bg"},De=f("h3",{class:"weather-card-title"},"24H天气预报",-1),Ce={class:"mb10 f12"},Se={class:"mb10 d-flex-center"},Ie=["title","src"],Ve={class:"weather-card-bg"},Te=f("h3",{class:"weather-card-title"},"7日天气预报",-1),qe={class:"mt5 weather-daily_grid f14"},Ae={class:"mb10"},He={class:"mb10"},We={class:"mb10 d-flex-center"},Be=["src"],Ee=f("p",{style:{height:"180px"}},null,-1),Pe={class:"mb10"},Le={class:"weather-card-bg"},$e=f("h3",{class:"weather-card-title"},"生活指数",-1),Fe={class:"weather-lifestyle f12"},Ge=f("div",{class:"mt10 f12 ac"},"天气数据由和风天气提供",-1),Ue={name:"appWeather",title:"i天气",icon:"weather-icon",description:"准确预报全球近10000多个地区的一周天气预报，包括国内县级和县级以上全部城市"},Qe=Object.assign(Ue,{setup(e){E([L,$,F]);const a={location:{},now:{tmp:0},daily_forecast:[{}],air_now_city:{},sun:{},rain:{},lifestyle:[]},t=h(a);q().then((e=>{t.value=e||a}));const l=w({cityId:"",cityOptions:[],loading:!1,searchWeather:null,updateTime:"",hourly24Data:[]}),s=h(null);const i=v((()=>{const e={type:"line",smooth:.2,label:{show:!0,position:"bottom",color:"#fff",borderWidth:0,formatter:function(e){return e.value+"°"}},lineStyle:{width:1},symbolSize:10,itemStyle:{width:10}},a=t.value.daily_forecast.map((e=>e.tmp_max)),l=t.value.daily_forecast.map((e=>e.tmp_min));return{backgroundColor:"transparent",color:["#fff","#fff"],grid:{left:"4%",right:"6%",bottom:30,top:30,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,show:!1,data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value",show:!1,min:Math.min(...l)},series:[n(r({},e),{label:{show:!0,position:"top",color:"#fff",borderWidth:0,formatter:function(e){return e.value+"°"}},data:a}),n(r({},e),{data:l})]}})),o={cw:"洗车指数",drsg:"穿衣指数",uv:"紫外线指数",fsh:"钓鱼指数",comf:"舒适度指数",sport:"运动指数",flu:"感冒指数",trav:"旅游指数"},c=v((()=>(t.value.lifestyle||[]).map((e=>({name:o[e.type],value:e.brf}))))),G=v((()=>({backgroundImage:t.value.now.cond_code&&W(t.value.now.cond_code)})));function U(e){l.cityOptions=[],e.length<2||H({location:e}).then((e=>{let a=e.location||[];a=a.map((e=>r({label:e.name+"-"+e.adm2},e))),l.cityOptions=a}))}async function Q(){l.loading=!0,await q(null,!0),await A(!0),l.cityId="",setTimeout((()=>{l.loading=!1}),300)}async function R(e){if(l.loading=!0,!e)return;let a=l.cityOptions.find((a=>a.id==e));await q(a,!0),await A(!0),setTimeout((()=>{l.loading=!1}),200)}function Y(e){let a=["周日","周一","周二","周三","周四","周五","周六"][D(e).day()];return D(e).format("DD")==D().format("DD")&&(a="今天"),a}return async function(){let e=await A();l.hourly24Data=e.hourly||[]}(),(e,a)=>{const o=b("el-icon"),r=y("loading");return d(),p(S,null,{default:x((()=>[g((d(),u("div",{class:"app-weather",style:C(_(G))},[f("div",se,[f("div",ie,[f("div",oe,[f("span",null,j(t.value.location.adm2)+",",1),f("span",null,j(t.value.location.name),1),f("span",re,j(t.value.now.cond_txt),1),f("span",ne,j(t.value.daily_forecast[0].tmp_min)+"°~"+j(t.value.daily_forecast[0].tmp_max)+"° ",1),f("span",ce,"发布于:"+j(_(T)(t.value.updateTime)),1)]),f("div",de,[m(_(V),{"append-to":"",modelValue:l.cityId,"onUpdate:modelValue":a[0]||(a[0]=e=>l.cityId=e),"remote-method":U,filterable:"",remote:"","popper-class":"app-weather-popper",placeholder:"输入城市、乡镇",onChange:R,size:"default"},{default:x((()=>[(d(!0),u(k,null,M(l.cityOptions,(e=>(d(),p(_(I),{key:e.value,label:e.label,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),m(o,{title:"自动定位",class:"location-btn",onClick:Q},{default:x((()=>[m(_(X))])),_:1})])]),f("div",pe,[f("span",me,j(t.value.now.tmp)+"°",1),f("div",ue,[t.value.air_now_city?(d(),u("p",fe,[m(o,{size:22},{default:x((()=>[m(_(K))])),_:1}),O(" "+j(t.value.air_now_city.qlty)+"/"+j(t.value.air_now_city.aqi),1)])):z("",!0),f("p",he,[f("img",{class:"mr5",style:{width:"20px",height:"20px"},src:`https://files.codelife.cc/itab/weather/icon/${t.value.now.cond_code}-fill.svg`},null,8,we),f("span",ve,j(t.value.now.cond_txt),1),f("span",be,j(t.value.now.wind_dir),1),f("span",ye,j(t.value.now.wind_sc)+"级",1)])])]),t.value.rain?(d(),u("div",xe,"预计"+j(t.value.rain.txt),1)):z("",!0),f("div",ge,[f("span",je,"湿度"+j(t.value.now.hum)+"%",1),f("span",_e,"气压"+j(t.value.now.pres)+"百帕",1),f("span",ke,"降水"+j(t.value.now.pcpn)+"mm",1),f("span",Me,[m(o,{size:16,title:"日出"},{default:x((()=>[m(_(ee))])),_:1}),O(" "+j(t.value.sun.rise),1)]),f("span",Oe,[m(o,{size:16,title:"日落"},{default:x((()=>[m(_(le))])),_:1}),O(" "+j(t.value.sun.set),1)])]),f("div",ze,[De,f("ul",{onMousewheel:a[1]||(a[1]=e=>function(e){e.preventDefault();let a=-e.wheelDelta||40*-e.deltaY,t=s.value;t.scrollLeft=t.scrollLeft+a/2}(e)),ref_key:"h24Scrollbar",ref:s,class:"f14 d-auto-x",style:{display:"flex"}},[(d(!0),u(k,null,M(l.hourly24Data,((e,a)=>(d(),u("li",{class:"weather-daily_item ac pb20",key:a,style:{"min-width":"50px"}},[f("p",Ce,j(_(T)(e.fxTime,"HH时")),1),f("p",Se,[f("img",{title:e.text,style:{width:"20px",height:"20px"},src:`https://files.codelife.cc/itab/weather/icon/${e.icon}-fill.svg`},null,8,Ie)]),f("p",null,j(e.temp)+"°",1)])))),128))],544)]),f("div",Ve,[Te,f("ul",qe,[(d(!0),u(k,null,M(t.value.daily_forecast,((e,a)=>{return d(),u("li",{class:"weather-daily_item ac",key:a},[f("p",Ae,j(Y(e.date)),1),f("p",He,j((t=e.date,D(t).format("MM-DD"))),1),f("p",We,[f("img",{class:"mr5",style:{width:"18px",height:"18px"},src:`https://files.codelife.cc/itab/weather/icon/${e.cond_code_d}-fill.svg`},null,8,Be),O(j(e.cond_txt_d),1)]),Ee,f("p",Pe,[m(o,null,{default:x((()=>[m(_(B))])),_:1}),O(" "+j(e.wind_sc)+"级 ",1)])]);var t})),128)),m(_(P),{autoresize:"",theme:"dark",class:"weather-line",option:_(i)},null,8,["option"])])]),f("div",Le,[$e,f("ul",Fe,[(d(!0),u(k,null,M(_(c),((e,a)=>(d(),u("li",{class:"d-flex-center",key:a},[f("div",null,[f("p",null,j(e.name),1),f("p",null,j(e.value),1)])])))),128))])]),Ge])],4)),[[r,l.loading]])])),_:1})}}});export{Qe as default};
