import{a4 as e,bs as a,ay as n,W as t,X as l,bu as r,cR as u,bG as s,bJ as i,k as o,r as c,by as d,cK as m,bz as p,Q as b,bK as v,cM as N,cN as f,aY as h,as as g,ax as y,bB as I,cP as V,aG as w,aH as x,b3 as S,A,bo as F,a2 as k,b1 as E,U as B,V as D,bp as z,bF as M}from"./save_config.7e387697.js";import{E as R}from"./el-input.07836306.js";import{R as _}from"./index2.dee1b5f7.js";import{a as j}from"./arrow-up.1bfacdc1.js";import{a as C}from"./arrow-down.ee3f081b.js";import{p as K}from"./plus.8a11ae65.js";const P=e({name:"Minus"}),T={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},G=[l("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64z"},null,-1)];const Y=e({name:"ElInputNumber",components:{ElInput:R,ElIcon:i,ArrowUp:j,ArrowDown:C,Plus:K,Minus:a(P,[["render",function(e,a,l,r,u,s){return n(),t("svg",T,G)}]])},directives:{RepeatClick:_},props:r({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:{type:Number},disabled:{type:Boolean,default:!1},size:{type:String,values:u},controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)}}),emits:{change:(e,a)=>e!==a,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,input:e=>s(e),"update:modelValue":e=>s(e)||void 0===e},setup(e,{emit:a}){const n=o(),t=c({currentValue:e.modelValue,userInput:null}),{t:l}=d(),{formItem:r}=m(),u=p("input-number"),i=b((()=>B(e.modelValue,-1)<e.min)),I=b((()=>B(e.modelValue)>e.max)),w=b((()=>{const a=E(e.step);return v(e.precision)?Math.max(E(e.modelValue),a):(e.precision,e.precision)})),x=b((()=>e.controls&&"right"===e.controlsPosition)),S=N(),A=f(),F=b((()=>{if(null!==t.userInput)return t.userInput;let a=t.currentValue;if(s(a)){if(Number.isNaN(a))return"";v(e.precision)||(a=a.toFixed(e.precision))}return a})),k=(e,a)=>{v(a)&&(a=w.value);const n=e.toString().split(".");if(n.length>1){const e=n[0],t=Math.round(+n[1]/10**(n[1].length-a));return Number.parseFloat(`${e}.${t}`)}return Number.parseFloat(""+Math.round(e*10**a)/10**a)},E=e=>{if(v(e))return 0;const a=e.toString(),n=a.indexOf(".");let t=0;return-1!==n&&(t=a.length-n-1),t},B=(a,n=1)=>s(a)?(a=s(a)?a:Number.NaN,k(a+e.step*n)):t.currentValue,D=(n,t)=>{const{max:l,min:r,step:u,precision:s,stepStrictly:i}=e;let o=Number(n);return null===n&&(o=Number.NaN),Number.isNaN(o)||(i&&(o=Math.round(o/u)*u),v(s)||(o=k(o,s)),(o>l||o<r)&&(o=o>l?l:r,t&&a("update:modelValue",o))),o},z=e=>{var n;const l=t.currentValue;let u=D(e);l!==u&&(Number.isNaN(u)&&(u=void 0),t.userInput=null,a("update:modelValue",u),a("input",u),a("change",u,l),null==(n=null==r?void 0:r.validate)||n.call(r,"change").catch((e=>V())),t.currentValue=u)};return h((()=>e.modelValue),(e=>{const a=D(e,!0);t.currentValue=a,t.userInput=null}),{immediate:!0}),g((()=>{var l;const r=null==(l=n.value)?void 0:l.input;if(r.setAttribute("role","spinbutton"),Number.isFinite(e.max)?r.setAttribute("aria-valuemax",String(e.max)):r.removeAttribute("aria-valuemax"),Number.isFinite(e.min)?r.setAttribute("aria-valuemin",String(e.min)):r.removeAttribute("aria-valuemin"),r.setAttribute("aria-valuenow",String(t.currentValue)),r.setAttribute("aria-disabled",String(A.value)),!s(e.modelValue)){let n=Number(e.modelValue);Number.isNaN(n)&&(n=void 0),a("update:modelValue",n)}})),y((()=>{var e;const a=null==(e=n.value)?void 0:e.input;null==a||a.setAttribute("aria-valuenow",t.currentValue)})),{t:l,input:n,displayValue:F,handleInput:e=>t.userInput=e,handleInputChange:e=>{const a=""!==e?Number(e):"";(s(a)&&!Number.isNaN(a)||""===e)&&z(a),t.userInput=null},controlsAtRight:x,decrease:()=>{if(A.value||i.value)return;const a=e.modelValue||0,n=B(a,-1);z(n)},increase:()=>{if(A.value||I.value)return;const a=e.modelValue||0,n=B(a);z(n)},inputNumberSize:S,inputNumberDisabled:A,maxDisabled:I,minDisabled:i,focus:()=>{var e,a;null==(a=null==(e=n.value)?void 0:e.focus)||a.call(e)},blur:()=>{var e,a;null==(a=null==(e=n.value)?void 0:e.blur)||a.call(e)},handleFocus:e=>{a("focus",e)},handleBlur:e=>{var n;a("blur",e),null==(n=null==r?void 0:r.validate)||n.call(r,"blur").catch((e=>V()))},ns:u}}}),$=["aria-label"],H=["aria-label"];const O=M(I(Y,[["render",function(e,a,l,r,u,s){const i=w("arrow-down"),o=w("minus"),c=w("el-icon"),d=w("arrow-up"),m=w("plus"),p=w("el-input"),b=x("repeat-click");return n(),t("div",{class:A([e.ns.b(),e.ns.m(e.inputNumberSize),e.ns.is("disabled",e.inputNumberDisabled),e.ns.is("without-controls",!e.controls),e.ns.is("controls-right",e.controlsAtRight)]),onDragstart:a[2]||(a[2]=z((()=>{}),["prevent"]))},[e.controls?S((n(),t("span",{key:0,role:"button","aria-label":e.t("el.inputNumber.decrease"),class:A([e.ns.e("decrease"),e.ns.is("disabled",e.minDisabled)]),onKeydown:a[0]||(a[0]=F(((...a)=>e.decrease&&e.decrease(...a)),["enter"]))},[k(c,null,{default:E((()=>[e.controlsAtRight?(n(),B(i,{key:0})):(n(),B(o,{key:1}))])),_:1})],42,$)),[[b,e.decrease]]):D("v-if",!0),e.controls?S((n(),t("span",{key:1,role:"button","aria-label":e.t("el.inputNumber.increase"),class:A([e.ns.e("increase"),e.ns.is("disabled",e.maxDisabled)]),onKeydown:a[1]||(a[1]=F(((...a)=>e.increase&&e.increase(...a)),["enter"]))},[k(c,null,{default:E((()=>[e.controlsAtRight?(n(),B(d,{key:0})):(n(),B(m,{key:1}))])),_:1})],42,H)),[[b,e.increase]]):D("v-if",!0),k(p,{id:e.id,ref:"input",type:"number",step:e.step,"model-value":e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[F(z(e.increase,["prevent"]),["up"]),F(z(e.decrease,["prevent"]),["down"])],onBlur:e.handleBlur,onFocus:e.handleFocus,onInput:e.handleInput,onChange:e.handleInputChange},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown","onBlur","onFocus","onInput","onChange"])],34)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]));export{O as E};
