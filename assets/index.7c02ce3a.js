import{_ as e}from"./d-dialog.64ba485e.js";import{a4 as o,ay as a,U as t,a2 as s,cc as l,cz as d,r,k as n,bq as i,ca as c,t as u,aY as p,Q as m,aG as f,W as b,b1 as v,x as h,V as j,b7 as y,I as x,aE as g,X as V,A as _,C as w,bp as k,b3 as z,bm as C,bo as E,aB as L,az as U,bx as M,c7 as O,cq as T}from"./save_config.7e387697.js";/* empty css                   *//* empty css                  */import{E as Y,a as q,b as B}from"./el-main.d92cc5ea.js";import{E as I}from"./el-input.07836306.js";import{E as A}from"./el-date-picker.e6e9780c.js";import"./el-scrollbar.80933a65.js";import{_ as D}from"./d-color.788f30cd.js";import{o as F}from"./orderBy.d224a8b2.js";import{a5 as K,y as R,P as G}from"./main.5f87c81f.js";import{E as P}from"./index2.d28dd348.js";import"./el-overlay.e22515de.js";import"./index2.dee1b5f7.js";import"./event2.b0442ad9.js";import"./arrow-up.1bfacdc1.js";import"./arrow-down.ee3f081b.js";import"./index2.dd10852c.js";import"./validator2.fec6f1ba.js";import"./index2.69c4a5bb.js";import"./isEqual.8b269055.js";import"./_baseIsEqual.840160ed.js";import"./_baseOrderBy.2703bb57.js";import"./identity.737b3aaf.js";var Q=o({name:"MoreFilled"});const W={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},X=s("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224z"},null,-1);Q.render=function(e,o,s,l,d,r){return a(),t("svg",W,[X])},Q.__file="packages/components/MoreFilled.vue";var $=Q;const H=e=>(L("data-v-e97fb798"),e=e(),U(),e),J={class:"todo-wrap d-layout"},N=H((()=>V("p",{class:"d-left-tabs-item"},"所有待办",-1))),S={key:0,class:"mt10 f12 pl20"},Z=["onClick"],ee={class:"d-cell d-hidden d-main"},oe={style:{width:"50px",height:"34px"}},ae={class:"todo-add"},te=["onKeyup"],se=H((()=>V("span",{class:"toto-add-line"},null,-1))),le=[H((()=>V("source",{src:"./audio/complete.wav"},null,-1)))];var de=l({setup(e){const o=d(),l=r({inputValue:"",todoList:[],sortTodo:[]});function L(e){if(!e)return;let o=M(`${e} 23:59:59`).valueOf();return!!e&&M().valueOf()>o}const U=n(null);(async()=>{let e=await c.get("todo");e||(e=O.get("todo"),await c.set("todo",e)),l.todoList=e})();const Q=i((async e=>{c.set("todo",u(e))}),500);p((()=>l.todoList),(e=>{let a=F(e=e||[],["ut","done"],["asc"]);l.sortTodo=a,o.value=l.sortTodo.slice(0,3),Q(e)}),{deep:!0});const W=()=>{if(!l.inputValue)return;let e={content:l.inputValue,expire:"",color:"",done:!1,ct:M().valueOf()};l.todoList.unshift(e),l.inputValue="",X()};function X(){T("todo")}const H=m((()=>100*(l.todoList||[]).filter((e=>e.done)).length/l.todoList.length+"%"));return(e,o)=>{const d=f("el-icon");return a(),b("div",J,[s(h(B),{class:"d-layout hfull"},{default:v((()=>[s(h(Y),{class:"d-left-tabs pt30",style:{"background-color":"var(--bg-info)",width:"160px"}},{default:v((()=>[N])),_:1}),s(h(q),{class:"todo-content pr10 hfull"},{default:v((()=>[h(l).todoList.length?j("",!0):(a(),b("div",S,"赶快添加您的第一条待办吧")),s(y,{tag:"ul",name:"list-complete",class:"todo-content-ul d-sub"},{default:v((()=>[(a(!0),b(x,null,g(h(l).sortTodo,((e,o)=>(a(),b("li",{class:"todo-content-li",key:e},[V("button",{class:_(["todo-check",{done:e.done}]),style:w({borderColor:e.color}),onClick:k((o=>(e=>{e.done=!e.done,e.done&&(U.value.load(),U.value.play()),X()})(e)),["prevent"])},[s(d,{class:"todo-icon-check"},{default:v((()=>[s(h(K))])),_:1})],14,Z),V("div",ee,[s(h(I),{autosize:{minRows:1,maxRows:10},type:"textarea",size:"small",onInput:X,class:_(["todo-text",{done:e.done}]),modelValue:e.content,"onUpdate:modelValue":o=>e.content=o},null,8,["class","modelValue","onUpdate:modelValue"]),s(h(A),{onChange:o=>e.focus=!1,clearable:!0,class:_(["item-expire",{isExpire:L(e.expire)}]),"value-format":"YYYY-MM-DD",size:"small",modelValue:e.expire,"onUpdate:modelValue":o=>e.expire=o,type:"date",style:{"--el-input-hover-border-color":"transparent","--el-input-focus-border-color":"transparent"},placeholder:"-"},null,8,["onChange","class","modelValue","onUpdate:modelValue"])]),V("div",oe,[e.done?j("",!0):(a(),t(h(P),{key:0,placement:"bottom-end",width:200,trigger:"hover"},{reference:v((()=>[s(d,null,{default:v((()=>[s(h($))])),_:1})])),default:v((()=>[V("div",null,[s(D,{title:"优先级",custom:!1,modelValue:e.color,"onUpdate:modelValue":o=>e.color=o,colors:["#e03131","#ffb000","#4772fa","var(--d-sub)"]},null,8,["modelValue","onUpdate:modelValue","colors"])])])),_:2},1024)),s(d,{class:"ml10 mr10",title:"删除",onClick:e=>(e=>{l.todoList.splice(e,1),X()})(o)},{default:v((()=>[s(h(R))])),_:2},1032,["onClick"])])])))),128))])),_:1}),V("div",ae,[s(d,{size:16,class:"todo-add-icon d-sub"},{default:v((()=>[s(h(G))])),_:1}),z(V("input",{autofocus:"autofocus",class:"todo-add-input bb",type:"text",onKeyup:E(W,["enter"]),placeholder:"添加任务","onUpdate:modelValue":o[0]||(o[0]=e=>h(l).inputValue=e)},null,40,te),[[C,h(l).inputValue,void 0,{trim:!0}]]),se])])),_:1})])),_:1}),V("div",{class:"todo-progress",style:w({width:h(H)})},[V("audio",{class:"d-hidden",ref_key:"refAudio",ref:U},le,512)],4)])}}},[["__scopeId","data-v-e97fb798"]]);const re={name:"appTodo"},ne=Object.assign(re,{setup:o=>(o,l)=>(a(),t(e,{height:"600px"},{default:v((()=>[s(de)])),_:1}))});export{ne as default};
